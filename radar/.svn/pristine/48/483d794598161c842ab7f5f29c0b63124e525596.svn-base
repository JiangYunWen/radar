{"remainingRequest":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\radar\\src\\components\\CountSolt\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\radar\\src\\components\\CountSolt\\index.vue","mtime":1600313285262},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js","mtime":1596527889887},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js","mtime":1596528120726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport RightPanel from '@/components/RightPanel';\nimport Settings from '@/components/Settings';\nexport default {\n  props: ['item'],\n  components: {\n    RightPanel: RightPanel,\n    Settings: Settings\n  },\n  data: function data() {\n    return {\n      activeName: 'first',\n      input: 1,\n      checked: false,\n      cpu: '',\n      ssd: '',\n      mem: '',\n      rx: '',\n      tx: '',\n      series_data: new Array(),\n      legend_names: new Array(),\n      rx_name: new Array(),\n      rx_data: new Array(),\n      tx_name: new Array(),\n      tx_data: new Array(),\n      drawer: false,\n      drawerWidth: '500px',\n      strdata: []\n    };\n  },\n  //监听数据变化\n  watch: {\n    item: {\n      handler: function handler(newVal) {\n        console.log('item', newVal);\n        this.item = newVal;\n        this.getCPURate();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    getrealtime: function getrealtime() {\n      var _this = this;\n\n      this.legend_names = [];\n      this.series_data = [];\n      this.$axios({\n        method: \"get\",\n        url: 'sys/device/status/realtime/id?deviceId=' + this.item.deviceId,\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          for (var key in res.data.cpu.series) {\n            _this.legend_names.push(key);\n\n            var swpdata = {};\n            swpdata['name'] = key;\n            swpdata['type'] = \"line\";\n            swpdata['data'] = res.data.cpu.series[key];\n\n            _this.series_data.push(swpdata);\n          } // this.legend_names.shift();\n          // this.series_data.shift();\n          // res.data.cpu.times.shift();\n\n\n          console.log(_this.legend_names);\n          console.log(_this.series_data);\n\n          var myChart = _this.$echarts.init(document.getElementById('myChart'));\n\n          myChart.setOption({\n            legend: {\n              data: _this.legend_names,\n              bottom: 0\n            },\n            xAxis: {\n              data: res.data.cpu.date\n            },\n            series: _this.series_data\n          });\n        } else {\n          _this.$message.error(res.data.msg);\n        }\n      }).catch(function (error) {\n        _this.$message.error('获取数据失败！');\n\n        console.log(error);\n      });\n    },\n    getCPURate: function getCPURate() {\n      var _this2 = this;\n\n      this.legend_names = [];\n      this.series_data = [];\n      this.$axios({\n        method: \"post\",\n        url: '/sys/device/status',\n        data: JSON.stringify({\n          id: this.item.deviceId,\n          \"isSub\": true,\n          \"keys\": [\"bht_host_sys\", \"nettx\", \"netrx\", \"brt_bmc_sys\"]\n        }),\n        headers: {\n          'Content-Type': \"application/json\"\n        },\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          var items = res.data.data.status;\n          _this2.strdata = res.data.data.status;\n\n          _this2.getSSDRate(items);\n\n          _this2.getMemRate(items);\n\n          _this2.getnettx(items);\n\n          _this2.getnetrx(items);\n\n          console.log(' this.strdata', _this2.strdata);\n\n          for (var key in items.bht_host_sys.cpu.series) {\n            _this2.legend_names.push(key);\n\n            var swpdata = {};\n            swpdata['name'] = key;\n            swpdata['type'] = \"line\";\n            swpdata['data'] = items.bht_host_sys.cpu.series[key];\n\n            _this2.series_data.push(swpdata);\n          } // this.legend_names.shift();\n          // this.series_data.shift();\n          // res.items.bht_host_sys.cpu.times.shift();\n\n\n          var myChart = _this2.$echarts.init(document.getElementById('myChart'));\n\n          myChart.setOption({\n            legend: {\n              data: _this2.legend_names,\n              bottom: 0\n            },\n            xAxis: {\n              data: items.bht_host_sys.cpu.times\n            },\n            series: _this2.series_data\n          });\n        } else {\n          _this2.$message.error(res.data.msg);\n\n          clearInterval(_this2.cpu);\n        }\n      }).catch(function (error) {\n        _this2.$message.error('获取数据失败！');\n\n        clearInterval(_this2.cpu);\n      });\n    },\n    getnetrx: function getnetrx(items) {\n      this.rx_name = [];\n      this.rx_data = [];\n\n      for (var key in items.bht_host_sys.netrx.series) {\n        this.rx_name.push(key);\n        var swpdata = {};\n        swpdata['name'] = key;\n        swpdata['type'] = \"line\";\n        swpdata['data'] = items.bht_host_sys.netrx.series[key];\n        this.rx_data.push(swpdata);\n      }\n\n      var myChart = this.$echarts.init(document.getElementById('Chartnetout'));\n      myChart.setOption({\n        legend: {\n          data: this.rx_name,\n          bottom: 0\n        },\n        xAxis: {\n          data: items.bht_host_sys.netrx.date\n        },\n        series: this.rx_data\n      });\n    },\n    getnettx: function getnettx(items) {\n      this.tx_name = [];\n      this.tx_data = [];\n\n      for (var key in items.bht_host_sys.nettx.series) {\n        this.tx_name.push(key);\n        var swpdata = {};\n        swpdata['name'] = key;\n        swpdata['type'] = \"line\";\n        swpdata['data'] = items.bht_host_sys.nettx.series[key];\n        this.tx_data.push(swpdata);\n      }\n\n      var myChart = this.$echarts.init(document.getElementById('Chartnetin'));\n      myChart.setOption({\n        legend: {\n          data: this.tx_name,\n          bottom: 0\n        },\n        xAxis: {\n          data: items.bht_host_sys.nettx.date\n        },\n        series: this.tx_data\n      });\n    },\n    getSSDRate: function getSSDRate(items) {\n      var myChart = this.$echarts.init(document.getElementById('container2'));\n      myChart.setOption({\n        series: [{\n          data: [{\n            value: items.brt_bmc_sys.SSDRate,\n            name: '已占用磁盘'\n          }, {\n            value: 100 - items.brt_bmc_sys.SSDRate,\n            name: '未占用磁盘'\n          }]\n        }]\n      });\n    },\n    getMemRate: function getMemRate(items) {\n      var myChart = this.$echarts.init(document.getElementById('container'));\n      myChart.setOption({\n        series: [{\n          data: [{\n            value: items.brt_bmc_sys.memRate,\n            name: '已占用内存'\n          }, {\n            value: 100 - items.brt_bmc_sys.memRate,\n            name: '未占用内存'\n          }]\n        }]\n      });\n    },\n    checkedFun: function checkedFun(e, checkedFresh) {\n      localStorage.setItem(\"check\", e);\n      console.log(e);\n\n      if (e == true) {\n        this.cpu = setInterval(this.getCPURate, parseInt(this.input) * 500);\n      } else if (e == false) {\n        clearInterval(this.cpu);\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.getCPURate();\n    $(\"#times\").attr(\"checked\", localStorage.getItem('check'));\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<div class=\"container\">\r\n    <!--侧方栏配置信息-->\r\n    <right-panel v-if=\"true\">\r\n        <settings :soltab=\"item\" />\r\n    </right-panel>\r\n\r\n    <el-tabs v-model=\"activeName\" type=\"card\">\r\n        <el-tab-pane label=\"配置\" name=\"first\">\r\n            <div style=\"display:flex;margin:10px\">\r\n\r\n                <span style=\"margin-right:20px;\">定时刷新</span>\r\n                <el-checkbox v-model=\"checked\" @change=\"checkedFun\" id=\"times\" style=\"margin-right:20px;\" size=\"medium\"></el-checkbox>\r\n                <el-input v-model=\"input\" style=\"width:50px;\"></el-input>秒\r\n            </div>\r\n            <!--CPU使用情况-->\r\n            <el-col :span=\"24\">\r\n                <drawLine />\r\n                <!--内存使用情况 磁盘使用情况-->\r\n                <drawCircle />\r\n                <!--网络使用情况-->\r\n                <netLine />\r\n            </el-col>\r\n        </el-tab-pane>\r\n\r\n        <el-tab-pane label=\"状态\" name=\"second\">\r\n            <!--状态信息-->\r\n            <staticMsg :staticdata=\"strdata\" />\r\n        </el-tab-pane>\r\n    </el-tabs>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport RightPanel from '@/components/RightPanel'\r\nimport Settings from '@/components/Settings'\r\nexport default {\r\n    props: ['item'],\r\n    components: {\r\n        RightPanel,\r\n        Settings,\r\n    },\r\n    data() {\r\n        return {\r\n            activeName: 'first',\r\n            input: 1,\r\n            checked: false,\r\n            cpu: '',\r\n            ssd: '',\r\n            mem: '',\r\n            rx: '',\r\n            tx: '',\r\n            series_data: new Array(),\r\n            legend_names: new Array(),\r\n            rx_name: new Array(),\r\n            rx_data: new Array(),\r\n            tx_name: new Array(),\r\n            tx_data: new Array(),\r\n            drawer: false,\r\n            drawerWidth: '500px',\r\n            strdata: []\r\n        }\r\n    },\r\n    //监听数据变化\r\n    watch: {\r\n        item: {\r\n            handler(newVal) {\r\n                console.log('item', newVal);\r\n                this.item = newVal;\r\n                this.getCPURate();\r\n            },\r\n            deep: true\r\n        },\r\n    },\r\n    methods: {\r\n        getrealtime() {\r\n            this.legend_names = [];\r\n            this.series_data = [];\r\n            this.$axios({\r\n                method: \"get\",\r\n                url: 'sys/device/status/realtime/id?deviceId=' + this.item.deviceId,\r\n                withCredentials: true,\r\n            }).then(res => {\r\n                if (res.data.code == 0) {\r\n\r\n                    for (var key in res.data.cpu.series) {\r\n                        this.legend_names.push(key);\r\n                        var swpdata = {};\r\n                        swpdata['name'] = key;\r\n                        swpdata['type'] = \"line\";\r\n                        swpdata['data'] = res.data.cpu.series[key];\r\n                        this.series_data.push(swpdata);\r\n\r\n                    }\r\n                    // this.legend_names.shift();\r\n                    // this.series_data.shift();\r\n                    // res.data.cpu.times.shift();\r\n                    console.log(this.legend_names);\r\n                    console.log(this.series_data);\r\n                    let myChart = this.$echarts.init(document.getElementById('myChart'));\r\n                    myChart.setOption({\r\n                        legend: {\r\n                            data: this.legend_names,\r\n                            bottom: 0\r\n                        },\r\n                        xAxis: {\r\n                            data: res.data.cpu.date\r\n                        },\r\n                        series: this.series_data\r\n                    });\r\n                } else {\r\n                    this.$message.error(res.data.msg);\r\n                }\r\n            }).catch(error => {\r\n                this.$message.error('获取数据失败！');\r\n                console.log(error);\r\n            });\r\n        },\r\n        getCPURate() {\r\n            this.legend_names = [];\r\n            this.series_data = [];\r\n            this.$axios({\r\n                method: \"post\",\r\n                url: '/sys/device/status',\r\n                data: JSON.stringify({\r\n                    id: this.item.deviceId,\r\n                    \"isSub\": true,\r\n                    \"keys\": [\r\n                        \"bht_host_sys\", \"nettx\", \"netrx\", \"brt_bmc_sys\"\r\n                    ]\r\n                }),\r\n                headers: {\r\n                    'Content-Type': \"application/json\"\r\n                },\r\n                withCredentials: true,\r\n            }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    var items = res.data.data.status;\r\n                    this.strdata = res.data.data.status;\r\n                    this.getSSDRate(items);\r\n                    this.getMemRate(items);\r\n                    this.getnettx(items);\r\n                    this.getnetrx(items);\r\n                    console.log(' this.strdata', this.strdata);\r\n                    for (var key in items.bht_host_sys.cpu.series) {\r\n                        this.legend_names.push(key);\r\n                        var swpdata = {};\r\n                        swpdata['name'] = key;\r\n                        swpdata['type'] = \"line\";\r\n                        swpdata['data'] = items.bht_host_sys.cpu.series[key];\r\n                        this.series_data.push(swpdata);\r\n                    }\r\n                    // this.legend_names.shift();\r\n                    // this.series_data.shift();\r\n                    // res.items.bht_host_sys.cpu.times.shift();\r\n\r\n                    let myChart = this.$echarts.init(document.getElementById('myChart'));\r\n                    myChart.setOption({\r\n                        legend: {\r\n                            data: this.legend_names,\r\n                            bottom: 0\r\n                        },\r\n                        xAxis: {\r\n                            data: items.bht_host_sys.cpu.times\r\n                        },\r\n                        series: this.series_data\r\n                    });\r\n\r\n                } else {\r\n                    this.$message.error(res.data.msg);\r\n                    clearInterval(this.cpu);\r\n                }\r\n            }).catch(error => {\r\n                this.$message.error('获取数据失败！');\r\n                clearInterval(this.cpu);\r\n            });\r\n        },\r\n        getnetrx(items) {\r\n            this.rx_name = [];\r\n            this.rx_data = [];\r\n            for (var key in items.bht_host_sys.netrx.series) {\r\n                this.rx_name.push(key);\r\n                var swpdata = {};\r\n                swpdata['name'] = key;\r\n                swpdata['type'] = \"line\";\r\n                swpdata['data'] = items.bht_host_sys.netrx.series[key];\r\n                this.rx_data.push(swpdata);\r\n            }\r\n            let myChart = this.$echarts.init(document.getElementById('Chartnetout'));\r\n            myChart.setOption({\r\n                legend: {\r\n                    data: this.rx_name,\r\n                    bottom: 0\r\n                },\r\n                xAxis: {\r\n                    data: items.bht_host_sys.netrx.date\r\n                },\r\n                series: this.rx_data\r\n            });\r\n        },\r\n        getnettx(items) {\r\n            this.tx_name = [];\r\n            this.tx_data = [];\r\n            for (var key in items.bht_host_sys.nettx.series) {\r\n                this.tx_name.push(key);\r\n                var swpdata = {};\r\n                swpdata['name'] = key;\r\n                swpdata['type'] = \"line\";\r\n                swpdata['data'] = items.bht_host_sys.nettx.series[key];\r\n                this.tx_data.push(swpdata);\r\n            }\r\n            let myChart = this.$echarts.init(document.getElementById('Chartnetin'));\r\n            myChart.setOption({\r\n                legend: {\r\n                    data: this.tx_name,\r\n                    bottom: 0\r\n                },\r\n                xAxis: {\r\n                    data: items.bht_host_sys.nettx.date\r\n                },\r\n                series: this.tx_data\r\n            });\r\n        },\r\n        getSSDRate(items) {\r\n            let myChart = this.$echarts.init(document.getElementById('container2'));\r\n            myChart.setOption({\r\n                series: [{\r\n                    data: [{\r\n                            value: items.brt_bmc_sys.SSDRate,\r\n                            name: '已占用磁盘'\r\n                        },\r\n                        {\r\n                            value: 100 - items.brt_bmc_sys.SSDRate,\r\n                            name: '未占用磁盘'\r\n                        }\r\n                    ]\r\n                }]\r\n            });\r\n        },\r\n        getMemRate(items) {\r\n            let myChart = this.$echarts.init(document.getElementById('container'));\r\n            myChart.setOption({\r\n                series: [{\r\n                    data: [{\r\n                            value: items.brt_bmc_sys.memRate,\r\n                            name: '已占用内存'\r\n                        },\r\n                        {\r\n                            value: 100 - items.brt_bmc_sys.memRate,\r\n                            name: '未占用内存'\r\n                        }\r\n                    ]\r\n                }]\r\n            });\r\n        },\r\n        checkedFun(e, checkedFresh) {\r\n            localStorage.setItem(\"check\", e);\r\n            console.log(e);\r\n            if (e == true) {\r\n                this.cpu = setInterval(this.getCPURate, (parseInt(this.input) * 500));\r\n            } else if (e == false) {\r\n                clearInterval(this.cpu);\r\n            }\r\n        }\r\n    },\r\n    mounted: function () {\r\n\r\n        this.getCPURate();\r\n        $(\"#times\").attr(\"checked\", localStorage.getItem('check'))\r\n\r\n    }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/components/CountSolt"}]}