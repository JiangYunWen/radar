{"remainingRequest":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\360极速浏览器下载\\vue-manage-system-master\\src\\components\\page\\Donate.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\src\\components\\page\\Donate.vue","mtime":1596103197599},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n// import ss from \"../../../node_modules/gojs/extensions/Figures\"\n  // import ss from \"../../../node_modules/jquery/dist/jquery\"\n//  let $ = go.GraphObject.make;  // 后面很多用到该变量来初始化diagram\nimport 'jquery-ui/ui/widgets/draggable'\nimport draw2d from 'draw2d'\nimport { fetchData } from '../../api/index';\n\nconst cityOptions = ['上海', '北京', '广州', '深圳'];\nexport default {\n    draw2d:{ draw2d },\n    data() {\n     return {\n        activeName: 'first',\n        checkAll: false,\n        checkedCities: ['上海', '北京'],\n        cities: cityOptions,\n        isIndeterminate: true,\n        items:[],\n        query: {\n                address: '',\n                name: '',\n                 grade: '',\n                limit:10,\n                pageIndex: 1,\n                pageSize: 10\n            },\n        tableData1: [],\n        multipleSelection: [],\n        delList: [],\n        pageTotal: 0,\n      };\n  },\n    methods: {    \n        // 获取 报警的模拟数据\n        getData(str) {\n                this.$axios({\n                    method:\"post\",\n                    url:'/sys/warn/listData',\n                    data:JSON.stringify({page:this.query.pageIndex,limit:this.query.pageSize,grade:this.query.grade}),\n                    headers: {\n                     'Content-Type': \"application/json\"\n                   },\n                    withCredentials:true,\n                }).then(res => {\n                    if(res.data.code==0){                                                     \n                        this.tableData1 = res.data.page.list;\n                        this.pageTotal = res.data.page.totalCount || 10;//1页数据\n                        this.query.pageIndex=res.data.page.currPage;//当前页\n                        this.query.pageSize=res.data.page.pageSize;//数据总数\n                    }else{\n                         this.$message.error(res.data.msg);\n                    }\n                }).catch(error => {\n                    this.$message.error('获取数据失败！');\n                });\n        }, \n      //机箱数据获取\n      getDevice(){\n                this.$axios({\n                    method:\"get\",\n                    url:'/sys/device/status/tree?devicePid=246',\n                    withCredentials:true,\n                }).then(res => {\n                    if(res.data.code==0){                                                     \n                        this.items=res.data.devices;\n                    }else{\n                         this.$message.error(res.data.msg);\n                    }\n                }).catch(error => {\n                    this.$message.error('获取数据失败！');\n                });\n      },\n      exportExcel () {\n            /* generate workbook object from table */\n            let wb = XLSX.utils.table_to_book(document.querySelector('.table'));\n            /* get binary string as output */\n            let wbout = XLSX.write(wb, { bookType: 'xlsx', bookSST: true, type: 'array' });\n            try {\n                FileSaver.saveAs(new Blob([wbout], { type: 'application/octet-stream' }), '系统日志.xlsx');\n            } catch (e)\n            {\n                if (typeof console !== 'undefined')\n                    console.log(e, wbout)\n            }\n            return wbout\n        },\n        // 触发搜索按钮\n        handleSearch() {\n            this.getData();\n        },\n        // 取消确认操作\n        handleUpdatefalse() {\n            const length = this.multipleSelection.length;\n            let str = [];\n            this.delList = this.delList.concat(this.multipleSelection);\n            //同时确认多个\n            for (let i = 0; i < this.delList.length; i++) {\n                str.push(this.delList[i].id+\"\");               \n            }\n\n            this.$confirm('是否将确认状态修改为未确认？', '提示', {\n                type: 'warning'\n            }).then(() => {\n                    this.ackflagUpdatefalse(str);\n                     this.multipleSelection = [];\n                })\n                .catch(() => {});\n        },\n        ackflagUpdatefalse(str){   \n            this.$axios({\n                method: \"POST\",\n                url: '/sys/warn/ackflag/false',\n                data: JSON.stringify(str),\n                // 设置请求头\n               headers: {\n                    'Content-Type': \"application/json\"\n                },\n                 withCredentials:true,//跨域请求\n            }).then((res) => {\n                let data = res.data\n                if(data.code==0) {         \n                    this.$message.success('操作完成') ;\n                    this.getData();//局部刷新表格               \n                } else {\n                    this.$message.error(data.msg || '操作失败')\n                }\n            }).catch((e)=>{\n                this.$message.error(e)\n            });\n        },\n        // 已确认操作\n        handleUpdatetrue() {\n            const length = this.multipleSelection.length;\n            let str = [];\n            this.delList = this.delList.concat(this.multipleSelection);\n            //同时确认多个\n            for (let i = 0; i < this.delList.length; i++) {\n                str.push(this.delList[i].id+\"\");               \n            }\n\n            this.$confirm('是否将确认状态修改为已确认？', '提示', {\n                type: 'warning'\n            }).then(() => {\n                    this.ackflagUpdatetrue(str);\n                     this.multipleSelection = [];\n                    // this.$message.success('删除成功');\n                    // this.tableData.splice(index, 1);\n                })\n                .catch(() => {});\n        },\n        ackflagUpdatetrue(str){   \n            this.$axios({\n                method: \"POST\",\n                url: '/sys/warn/ackflag/true',\n                data: JSON.stringify(str),\n                // 设置请求头\n               headers: {\n                    'Content-Type': \"application/json\"\n                },\n                 withCredentials:true,//跨域请求\n            }).then((res) => {\n                let data = res.data\n                if(data.code==0) {         \n                    this.$message.success('操作完成') ;\n                    this.getData();//局部刷新表格               \n                } else {\n                    this.$message.error(data.msg || '操作失败')\n                }\n            }).catch((e)=>{\n                this.$message.error(e)\n            });\n        },\n        // 已清除操作\n        handleclearflagtrue() {\n            const length = this.multipleSelection.length;\n            let str = [];\n            this.delList = this.delList.concat(this.multipleSelection);\n            //同时确认多个\n            for (let i = 0; i < this.delList.length; i++) {\n                str.push(this.delList[i].id+\"\");               \n            }\n\n            this.$confirm('是否清除数据？', '提示', {\n                type: 'warning'\n            }).then(() => {\n                    this.ackflagclearflagtrue(str);\n                     this.multipleSelection = [];\n                    // this.$message.success('删除成功');\n                    // this.tableData.splice(index, 1);\n                })\n                .catch(() => {});\n        },\n        ackflagclearflagtrue(str){   \n            this.$axios({\n                method: \"POST\",\n                url: '/sys/warn/clearflag/true',\n                data: JSON.stringify(str),\n                // 设置请求头\n               headers: {\n                    'Content-Type': \"application/json\"\n                },\n                 withCredentials:true,//跨域请求\n            }).then((res) => {\n                let data = res.data\n                if(data.code==0) {         \n                    this.$message.success('操作完成') ;\n                    this.getData();//局部刷新表格               \n                } else {\n                    this.$message.error(data.msg || '操作失败')\n                }\n            }).catch((e)=>{\n                this.$message.error(e)\n            });\n        },\n\n        // 多选操作\n        handleSelectionChange(val) {\n            this.multipleSelection = val;\n        },\n        // 分页导航\n        // 每页显示的条数改变\n        changeSizeHandle(val) {\n            this.query.pageSize = val         // 改变每页显示的条数 \n            this.query.pageIndex = 1          // 注意：在改变每页显示的条数时，要将页码显示到第一页\n            this.getData()                    // 点击每页显示的条数时，显示第一页\n            console.log(`每页 ${val} 条`)\n        },\n        // current-change用于监听页数改变，而内容也发生改变\n        currentChangeHandle(val) {\n            this.query.pageIndex = val            // 改变默认的页数\n            this.getData()                        // 切换页码时，要获取每页显示的条数\n            console.log(`当前页: ${val}`)\n        }\n    },\n   mounted: function() {\n       this.getDevice();\n       this.getData();\n      \n   }\n\n};\n",null]}