{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"table\"],{\"24a4\":function(e,t,a){\"use strict\";var i=a(\"ae93\"),l=a.n(i);l.a},ae93:function(e,t,a){},f03a:function(e,t,a){\"use strict\";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",[a(\"div\",{staticClass:\"crumbs\"},[a(\"el-breadcrumb\",{attrs:{separator:\"/\"}},[a(\"el-breadcrumb-item\",[a(\"i\",{staticClass:\"el-icon-lx-cascades\"}),e._v(\" 文件管理\\n            \")])],1)],1),a(\"div\",{staticClass:\"container\"},[a(\"div\",{staticClass:\"handle-box\"},[a(\"el-button\",{staticClass:\"handle-del mr8\",attrs:{type:\"primary\",icon:\"el-icon-delete\"},on:{click:e.delAllSelection}},[e._v(\"批量删除\")]),a(\"el-button\",{staticClass:\"handle-add mr10\",attrs:{type:\"primary\",icon:\"el-icon-add\"},on:{click:e.addFile}},[e._v(\"文件上传\")]),a(\"el-input\",{staticClass:\"handle-input mr10\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"文件名\"},model:{value:e.query.fileNameVague,callback:function(t){e.$set(e.query,\"fileNameVague\",t)},expression:\"query.fileNameVague\"}}),a(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"搜索\")])],1),a(\"el-table\",{ref:\"multipleTable\",staticClass:\"table\",attrs:{data:e.tableData1,border:\"\",\"header-cell-class-name\":\"table-header\"},on:{\"selection-change\":e.handleSelectionChange}},[a(\"el-table-column\",{attrs:{type:\"selection\",width:\"55\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"id\",label:\"ID\",width:\"55\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"fileName\",label:\"文件名称\"}}),a(\"el-table-column\",{attrs:{prop:\"fileMd5\",label:\"MD5\"}}),a(\"el-table-column\",{attrs:{prop:\"url\",label:\"资源名称\"}}),a(\"el-table-column\",{attrs:{prop:\"fileSize\",label:\"文件大小（KB）\",align:\"center\"}}),a(\"el-table-column\",{attrs:{prop:\"createTime\",label:\"上传时间\"}}),a(\"el-table-column\",{attrs:{prop:\"editTime\",label:\"修改时间\",align:\"center\"}}),a(\"el-table-column\",{attrs:{label:\"操作\",width:\"180\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"text\",icon:\"el-icon-edit\"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(\"编辑\")]),a(\"el-button\",{staticClass:\"red\",attrs:{type:\"text\",icon:\"el-icon-delete\"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v(\"删除\")])]}}])})],1),a(\"div\",{staticClass:\"pagination\"},[a(\"el-pagination\",{attrs:{\"current-page\":e.query.pageIndex,layout:\"total, sizes, prev, pager, next, jumper\",total:e.pageTotal,background:\"\"},on:{\"size-change\":e.changeSizeHandle,\"current-change\":e.currentChangeHandle}})],1)],1),a(\"el-dialog\",{attrs:{title:\"编辑\",visible:e.editVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.editVisible=t}}},[a(\"el-form\",{ref:\"form\",staticStyle:{width:\"300px\",\"margin-left\":\"50px\"},attrs:{model:e.form,\"label-width\":\"70px\"}},[a(\"el-form-item\",{attrs:{label:\"文件名 \"}},[a(\"el-input\",{model:{value:e.form.fileName,callback:function(t){e.$set(e.form,\"fileName\",t)},expression:\"form.fileName\"}})],1),a(\"el-form-item\",{attrs:{label:\"文件 \"}},[a(\"input\",{ref:\"inputer\",attrs:{type:\"file\",id:\"people-export\"}})])],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.editVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveEdit}},[e._v(\"确 定\")])],1)],1),a(\"el-dialog\",{attrs:{title:\"文件上传 \",visible:e.addVisible,width:\"30%\"},on:{\"update:visible\":function(t){e.addVisible=t}}},[a(\"el-form\",{ref:\"form\",staticStyle:{width:\"300px\",\"margin-left\":\"50px\"},attrs:{model:e.file,\"label-width\":\"70px\"}},[a(\"el-form-item\",{attrs:{label:\"文件名\"}},[a(\"el-input\",{model:{value:e.file.fileName,callback:function(t){e.$set(e.file,\"fileName\",t)},expression:\"file.fileName\"}})],1),a(\"el-form-item\",{attrs:{label:\"文件 \"}},[a(\"input\",{ref:\"inputer\",attrs:{type:\"file\"}})])],1),a(\"span\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{on:{click:function(t){e.addVisible=!1}}},[e._v(\"取 消\")]),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:e.saveAdd}},[e._v(\"确 定\")])],1)],1)],1)},l=[],n={name:\"basetable\",data:function(){return{query:{fileNameVague:\"\",limit:10,pageIndex:1,pageSize:10},tableData1:[],multipleSelection:[],delList:[],editVisible:!1,addVisible:!1,file:{fileName:\"\",url:\"\"},pageTotal:0,form:{},idx:-1,id:-1}},created:function(){this.getData()},methods:{getData:function(){var e=this;console.log(this.query.fileName),this.$axios({method:\"post\",url:\"/sys/file/listData\",data:JSON.stringify({page:this.query.pageIndex,limit:this.query.pageSize,fileNameVague:this.query.fileNameVague}),headers:{\"Content-Type\":\"application/json\"},withCredentials:!0}).then((function(t){if(0==t.data.code){for(var a=0;a<t.data.page.list.length;a++){var i=t.data.page.list[a];i.fileSize=(i.fileSize/1024).toFixed(2)}e.tableData1=t.data.page.list,console.log(t.data.page),e.pageTotal=t.data.page.totalCount||10,e.query.pageIndex=t.data.page.currPage,e.query.pageSize=t.data.page.pageSize}else e.$message.error(t.data.msg)})).catch((function(t){e.$message.error(\"获取数据失败！\")}))},handleSearch:function(){console.log(this.query),this.getData()},handleDelete:function(e,t){var a=this;this.id=t.id,this.$confirm(\"确定要删除吗？\",\"提示\",{type:\"warning\"}).then((function(){a.saveDelete()})).catch((function(){}))},saveDelete:function(){var e=this,t=[];t.push(this.id+\"\"),this.$axios({method:\"POST\",url:\"/sys/file/delete\",data:JSON.stringify(t),headers:{\"Content-Type\":\"application/json\"},withCredentials:!0}).then((function(t){var a=t.data;0==a.code?(e.$message.success(\"操作完成\"),e.getData()):e.$message.error(a.msg||\"操作失败\")})).catch((function(t){e.$message.error(t)}))},handleSelectionChange:function(e){this.multipleSelection=e},delAllSelection:function(){this.multipleSelection.length;var e=[];this.delList=this.delList.concat(this.multipleSelection);for(var t=0;t<this.delList.length;t++)e.push(this.delList[t].id+\"\");console.log(e),this.saveDelete(e),this.multipleSelection=[]},addFile:function(){this.addVisible=!0},saveAdd:function(e){var t=this;this.addVisible=!1;var a=new FormData;a.append(\"filename\",this.file.fileName),a.append(\"file\",document.querySelector(\"input[type=file]\").files[0]),this.$axios({method:\"POST\",url:\"/sys/file/save\",data:a,headers:{\"Content-Type\":\"multipart/form-data\"},withCredentials:!0}).then((function(e){var a=e.data;0==a.code?(t.$message.success(\"操作完成\"),t.getData()):t.$message.error(a.msg||\"操作失败\"),t.uploadLoading=!1})).catch((function(e){t.uploadLoading=!1,t.$message.error(e)}))},handleEdit:function(e,t){this.idx=e,this.form=t,this.id=t.id,this.editVisible=!0},saveEdit:function(){var e=this;this.editVisible=!1;var t=new FormData;console.log(this.id),console.log(this.form.fileName),t.append(\"id\",this.id),t.append(\"filename\",this.form.fileName),t.append(\"file\",document.getElementById(\"people-export\").files[0]),this.$axios({method:\"POST\",url:\"/sys/file/update\",data:t,headers:{\"Content-Type\":\"multipart/form-data\"},withCredentials:!0}).then((function(t){var a=t.data;0==a.code?(e.$message.success(\"修改第 \".concat(e.idx+1,\" 行成功\")),e.getData()):e.$message.error(a.msg||\"操作失败\")})).catch((function(t){e.$message.error(t)}))},changeSizeHandle:function(e){this.query.pageSize=e,this.query.pageIndex=1,this.getData(),console.log(\"每页 \".concat(e,\" 条\"))},currentChangeHandle:function(e){this.query.pageIndex=e,this.getData(),console.log(\"当前页: \".concat(e))}}},s=n,o=(a(\"24a4\"),a(\"2877\")),r=Object(o[\"a\"])(s,i,l,!1,null,\"d6106482\",null);t[\"default\"]=r.exports}}]);","extractedComments":[]}