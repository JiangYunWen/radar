{"remainingRequest":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\360极速浏览器下载\\vue-manage-system-master\\src\\components\\page\\Logs.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\src\\components\\page\\Logs.vue","mtime":1595409719359},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\360极速浏览器下载\\vue-manage-system-master\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n\nimport { Terminal } from 'xterm'\nimport os from 'os'\nimport 'xterm/dist/xterm.css'\nimport * as fit from 'xterm/lib/addons/fit/fit'\nimport * as attach from 'xterm/lib/addons/attach/attach'\nconst pty = require('node-pty')\nTerminal.applyAddon(fit)\nTerminal.applyAddon(attach)\nexport default {\n  name: 'mainPage',\n  methods: {\n    init () {\n      const shell = process.env[os.platform() === 'win32' ? 'COMSPEC' : 'SHELL']\n      let env = process.env\n      env['LC_ALL'] = 'zh_CN.UTF-8'\n      env['LANG'] = 'zh_CN.UTF-8'\n      env['LC_CTYPE'] = 'zh_CN.UTF-8'\n      const ptyProcess = pty.spawn(shell, [], {\n        name: 'xterm-color',\n        cols: 80,\n        rows: 30,\n        cwd: process.cwd(),\n        env: env,\n        encoding: null\n      })\n      const xterm = new Terminal({\n        cols: 80,\n        rows: 30,\n        theme: {\n          foreground: 'rgb(254,239,143)',\n          background: 'rgb(22,102,47)',\n          cursor: 'rgb(254,239,143)'\n        }\n      })\n      xterm.open(this.$refs.xterm)\n      xterm.on('data', (data) => {\n        console.log(Buffer.from(data))\n        console.log('xterm:' + Buffer.from(data).toString())\n        ptyProcess.write(Buffer.from(data))\n      })\n      ptyProcess.on('data', function (data) {\n        console.log(data)\n        console.log('ptyProcess:' + data.toString())\n        xterm.write(data.toString())\n      })\n      // ptyProcess.write('export LANG=zh_CN.UTF-8\\n')\n    }\n  },\n  mounted () {\n    this.init()\n  }\n}\n",{"version":3,"sources":["Logs.vue"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Logs.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n    <div ref=\"xterm\"></div>\r\n</template>\r\n\r\n<script>\r\n  import { Terminal } from 'xterm'\r\n  import os from 'os'\r\n  import 'xterm/dist/xterm.css'\r\n  import * as fit from 'xterm/lib/addons/fit/fit'\r\n  import * as attach from 'xterm/lib/addons/attach/attach'\r\n  const pty = require('node-pty')\r\n  Terminal.applyAddon(fit)\r\n  Terminal.applyAddon(attach)\r\n  export default {\r\n    name: 'mainPage',\r\n    methods: {\r\n      init () {\r\n        const shell = process.env[os.platform() === 'win32' ? 'COMSPEC' : 'SHELL']\r\n        let env = process.env\r\n        env['LC_ALL'] = 'zh_CN.UTF-8'\r\n        env['LANG'] = 'zh_CN.UTF-8'\r\n        env['LC_CTYPE'] = 'zh_CN.UTF-8'\r\n        const ptyProcess = pty.spawn(shell, [], {\r\n          name: 'xterm-color',\r\n          cols: 80,\r\n          rows: 30,\r\n          cwd: process.cwd(),\r\n          env: env,\r\n          encoding: null\r\n        })\r\n        const xterm = new Terminal({\r\n          cols: 80,\r\n          rows: 30,\r\n          theme: {\r\n            foreground: 'rgb(254,239,143)',\r\n            background: 'rgb(22,102,47)',\r\n            cursor: 'rgb(254,239,143)'\r\n          }\r\n        })\r\n        xterm.open(this.$refs.xterm)\r\n        xterm.on('data', (data) => {\r\n          console.log(Buffer.from(data))\r\n          console.log('xterm:' + Buffer.from(data).toString())\r\n          ptyProcess.write(Buffer.from(data))\r\n        })\r\n        ptyProcess.on('data', function (data) {\r\n          console.log(data)\r\n          console.log('ptyProcess:' + data.toString())\r\n          xterm.write(data.toString())\r\n        })\r\n        // ptyProcess.write('export LANG=zh_CN.UTF-8\\n')\r\n      }\r\n    },\r\n    mounted () {\r\n      this.init()\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n</style>"]}]}