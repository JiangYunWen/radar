{"remainingRequest":"D:\\vue\\radar\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\radar\\src\\components\\CrateSolt\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\radar\\src\\components\\CrateSolt\\index.vue","mtime":1600243587597},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1596528110531},{"path":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js","mtime":1596527889887},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js","mtime":1596528120726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SoltStatus from '@/components/SoltStatus';\nvar list = [{\n  name: '',\n  status: '',\n  cpu: '',\n  memory: ''\n}];\nexport default {\n  components: {\n    SoltStatus: SoltStatus\n  },\n  props: ['msg'],\n  data: function data() {\n    return {\n      msg: this.msg,\n      solts: [],\n      checkAll: false,\n      checkedCities: [],\n      cities: [],\n      isIndeterminate: false,\n      IpmiCmdEnum: [],\n      form: {\n        cmdid: 0,\n        ids: []\n      },\n      viewclass: 'bat fa fa-battery-0 fa-fw'\n    };\n  },\n  methods: {\n    msgTolist: function msgTolist() {\n      var array = [];\n\n      for (var i = 0; i < 14; i++) {\n        array.push(list[0]);\n      }\n\n      if (this.msg == null) {\n        this.solts = array;\n        return;\n      }\n\n      for (var i = 0; i < this.msg.length; i++) {\n        if (this.msg[i].status.brt_bmc_sys != null) {\n          this.msg[i].status.brt_bmc_sys['ssdRate'] = Math.round(this.msg[i].status.brt_bmc_sys.usedSSDSize / this.msg[i].status.brt_bmc_sys.ssdsize * 100);\n          this.cities[i] = this.msg[i].deviceId;\n          array[this.msg[i].slotPosition - 1] = this.msg[i];\n        } else {\n          array[this.msg[i].slotPosition - 1] = this.msg[i];\n        }\n      }\n\n      this.solts = array;\n    },\n    //全选\n    handleCheckAllChange: function handleCheckAllChange(val) {\n      this.checkedCities = val ? this.cities : [];\n      this.isIndeterminate = false;\n    },\n    //单选及反选\n    handleCheckedCitiesChange: function handleCheckedCitiesChange(value) {\n      this.form.ids = value;\n      var checkedCount = value.length;\n      this.checkAll = checkedCount === this.cities.length;\n      this.isIndeterminate = checkedCount > 0 && checkedCount < this.cities.length;\n    },\n    IpmiCmd: function IpmiCmd(cmd) {\n      var _this = this;\n\n      this.$axios({\n        method: \"POST\",\n        url: '/sys/device/cmd/ipmi',\n        data: JSON.stringify(this.form),\n        headers: {\n          'Content-Type': \"application/json\"\n        },\n        withCredentials: true\n      }).then(function (res) {\n        var data = res.data;\n\n        if (data.code == 0) {\n          _this.$message.success('操作完成');\n        } else {\n          _this.$message.error(data.msg || '操作失败');\n        }\n\n        _this.uploadLoading = false;\n      }).catch(function (e) {\n        _this.uploadLoading = false;\n\n        _this.$message.error(e);\n      });\n    },\n    //命令\n    Action: function Action(cmd) {\n      var _this2 = this;\n\n      this.$axios({\n        method: \"get\",\n        url: '/getData/getEnum?enumName=IpmiCmdEnum',\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          _this2.IpmiCmdEnum = res.data.data;\n\n          for (var i = 0; i < _this2.IpmiCmdEnum.length; i++) {\n            if (_this2.IpmiCmdEnum[i].code === cmd) {\n              _this2.form.cmdid = _this2.IpmiCmdEnum[i].code;\n\n              _this2.IpmiCmd();\n            }\n          }\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n      }).catch(function (error) {\n        _this2.$message.error('获取数据失败！');\n      });\n    }\n  },\n  //监听数据变化\n  watch: {\n    msg: {\n      handler: function handler(newVal) {\n        this.msgTolist();\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    this.msgTolist(); //全选全不选\n\n    $(\"#checkAll\").click(function () {\n      $('input[name=\"check\"]').attr(\"checked\", this.checked);\n    });\n    var $subBox = $(\"input[name='check']\");\n    $subBox.click(function () {\n      $(\"#checkAll\").attr(\"checked\", $subBox.length == $(\"input[name='check']:checked\").length ? true : false);\n    }); //反选*****\n  }\n};",null]}