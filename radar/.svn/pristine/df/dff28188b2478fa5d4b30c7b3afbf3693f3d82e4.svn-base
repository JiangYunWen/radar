{"remainingRequest":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\radar\\src\\components\\test\\Test.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\radar\\src\\components\\test\\Test.vue","mtime":1596769114762},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js","mtime":1596527889887},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js","mtime":1596528120726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport SoltStatus from '@/components/SoltStatus';\nvar list = [{\n  name: '',\n  status: '',\n  cpu: '',\n  memory: ''\n}];\nexport default {\n  props: ['msg'],\n  data: function data() {\n    return {\n      msg: this.msg,\n      solts: [],\n      checkAll: false,\n      checkedCities: [],\n      cities: [],\n      isIndeterminate: false,\n      IpmiCmdEnum: [],\n      form: {\n        cmdid: 0,\n        ids: []\n      },\n      viewclass: 'bat fa fa-battery-0 fa-fw'\n    };\n  },\n  methods: {\n    msgTolist: function msgTolist() {\n      var array = [];\n\n      for (var i = 0; i < 14; i++) {\n        array.push(list[0]);\n      }\n\n      if (this.msg == null) {\n        this.solts = array;\n        return;\n      }\n\n      for (var i = 0; i < this.msg.length; i++) {\n        if (this.msg[i].status.brt_bmc_sys != null) {\n          this.msg[i].status.brt_bmc_sys['ssdRate'] = Math.round(this.msg[i].status.brt_bmc_sys.usedSSDSize / this.msg[i].status.brt_bmc_sys.ssdsize * 100);\n          this.cities[i] = this.msg[i].deviceId;\n          array[this.msg[i].slotPosition - 1] = this.msg[i];\n        } else {\n          array[this.msg[i].slotPosition - 1] = this.msg[i];\n        }\n      }\n\n      this.solts = array;\n      console.log('222', this.solts);\n    },\n    //全选\n    handleCheckAllChange: function handleCheckAllChange(val) {\n      this.checkedCities = val ? this.cities : [];\n      this.isIndeterminate = false;\n    },\n    //单选及反选\n    handleCheckedCitiesChange: function handleCheckedCitiesChange(value) {\n      console.log('单选：' + value);\n      this.form.ids = value;\n      var checkedCount = value.length;\n      this.checkAll = checkedCount === this.cities.length;\n      this.isIndeterminate = checkedCount > 0 && checkedCount < this.cities.length;\n    },\n    IpmiCmd: function IpmiCmd(cmd) {\n      var _this = this;\n\n      console.log(\"cmd:\" + cmd); //  setTimeout(\"Action(\"+cmd+\")\",2000);\n      // this.Action(cmd);\n\n      console.log(this.form);\n      this.$axios({\n        method: \"POST\",\n        url: '/sys/device/cmd/ipmi',\n        data: JSON.stringify(this.form),\n        headers: {\n          'Content-Type': \"application/json\"\n        },\n        withCredentials: true\n      }).then(function (res) {\n        var data = res.data;\n\n        if (data.code == 0) {\n          _this.$message.success('操作完成');\n        } else {\n          _this.$message.error(data.msg || '操作失败');\n        }\n\n        _this.uploadLoading = false;\n      }).catch(function (e) {\n        _this.uploadLoading = false;\n\n        _this.$message.error(e);\n      });\n    },\n    //命令\n    Action: function Action(cmd) {\n      var _this2 = this;\n\n      this.$axios({\n        method: \"get\",\n        url: '/getData/getEnum?enumName=IpmiCmdEnum',\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          _this2.IpmiCmdEnum = res.data.data;\n\n          for (var i = 0; i < _this2.IpmiCmdEnum.length; i++) {\n            if (_this2.IpmiCmdEnum[i].code === cmd) {\n              _this2.form.cmdid = _this2.IpmiCmdEnum[i].code;\n\n              _this2.IpmiCmd();\n            }\n          }\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n      }).catch(function (error) {\n        _this2.$message.error('获取数据失败！');\n      });\n    }\n  },\n  //监听数据变化\n  watch: {\n    msg: {\n      handler: function handler(newVal) {\n        console.log('newVal', newVal);\n        this.msgTolist();\n      },\n      deep: true\n    }\n  },\n  mounted: function mounted() {\n    this.msgTolist(); //全选全不选\n\n    $(\"#checkAll\").click(function () {\n      $('input[name=\"check\"]').attr(\"checked\", this.checked);\n    });\n    var $subBox = $(\"input[name='check']\");\n    $subBox.click(function () {\n      $(\"#checkAll\").attr(\"checked\", $subBox.length == $(\"input[name='check']:checked\").length ? true : false);\n    }); //反选*****\n  },\n  components: {\n    rateShow: rateShow\n  }\n};",{"version":3,"sources":["Test.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"cont\" >\r\n      \r\n      <div class=\"contsolt\" v-for=\"solt in solts\" :key=\"solt.deviceId\">\r\n          <template v-if=\"solt.subtype===5\">\r\n                <img src=\"../../assets/img/dy2.jpg\" class=\"dy\" />\r\n               <span class=\"name\">{{solt.name}}</span>\r\n          </template>\r\n          <template v-else-if=\"solt.subtype===7\">\r\n               <span class=\"name\">{{solt.name}}</span>\r\n          </template>\r\n          <template v-else>\r\n          <ul>\r\n             <li> <span class=\"status\">状态</span></li>\r\n              <template v-if=\"solt.status\">\r\n                <el-checkbox-group class=\"moring\" v-model=\"checkedCities\" @change=\"handleCheckedCitiesChange\">\r\n                  <el-checkbox  :label=\"solt.deviceId\" :key=\"solt.deviceId\">\r\n                  <span hidden> {{solt.deviceId}}</span>\r\n                  </el-checkbox>\r\n                </el-checkbox-group>\r\n                  <li><img src=\"../../assets/img/statustrue.jpg\" class=\"image\" /></li>\r\n                  \r\n                  <SoltStatus v-bind:showdata=\"{\r\n                    titlename:'CPU',titleclass:'cpu',msgclass:'bat fa fa-fw', showico:'fa-battery-',value:solt.status.brt_bmc_sys.cpurate}\" v-if=\"solt.status.brt_bmc_sys.cpurate!==undefined\">\r\n                  </SoltStatus> \r\n                 \r\n                  <SoltStatus v-bind:showdata=\"{\r\n                    titlename:'内存',titleclass:'memory',msgclass:'memorybat fa fa-fw', showico:'fa-battery-',value:solt.status.brt_bmc_sys.memRate}\" v-if=\"solt.status.brt_bmc_sys.memRate!==undefined\">\r\n                  </SoltStatus> \r\n\r\n                   <SoltStatus v-bind:showdata=\"{\r\n                    titlename:'SSD',titleclass:'ssd',msgclass:'ssdbat fa fa-fw', showico:'fa-battery-',value:solt.status.brt_bmc_sys.ssdRate}\" v-if=\"!isNaN(solt.status.brt_bmc_sys.ssdRate)\">\r\n                  </SoltStatus> \r\n                  <!--span class=\"cpu\">CPU</span>\r\n                  <span class=\"bat fa fa-battery-0 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.cpurate+'%'\" v-if=\"solt.status.brt_bmc_sys.cpurate==0\"></span>\r\n                  <span class=\"bat fa fa-battery-1 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.cpurate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.cpurate>0&&solt.status.brt_bmc_sys.cpurate<=20\"></span>\r\n                  <span class=\"bat fa fa-battery-2 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.cpurate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.cpurate>20&&solt.status.brt_bmc_sys.cpurate<=50\"></span>\r\n                  <span class=\"bat fa fa-battery-3 fa-fw\" style=\"color:red;\" :title=\"solt.status.brt_bmc_sys.cpurate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.cpurate>50&&solt.status.brt_bmc_sys.cpurate<=80\"></span>\r\n                  <span class=\"bat fa fa-battery-4 fa-fw\" style=\"color:red;\" :title=\"solt.status.brt_bmc_sys.cpurate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.cpurate>80&&solt.status.brt_bmc_sys.cpurate<=100\"></span-->        \r\n                  <!--span class=\"memory\">内存</span>\r\n                  <span class=\"memorybat fa fa-battery-0 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.memRate+'%'\" v-if=\"solt.status.brt_bmc_sys.memRate==0\"></span>\r\n                  <span class=\"memorybat fa fa-battery-1 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.memRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.memRate>0&&solt.status.brt_bmc_sys.memRate<=20\"></span>\r\n                  <span class=\"memorybat fa fa-battery-2 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.memRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.memRate>20&&solt.status.brt_bmc_sys.memRate<=50\"></span>\r\n                  <span class=\"memorybat fa fa-battery-3 fa-fw\" style=\"color:red;\" :title=\"solt.status.brt_bmc_sys.memRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.memRate>50&&solt.status.brt_bmc_sys.memRate<=80\"></span>\r\n                  <span class=\"memorybat fa fa-battery-4 fa-fw\" style=\"color:red;\" :title=\"solt.status.brt_bmc_sys.memRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.memRate>80&&solt.status.brt_bmc_sys.memRate<=100\"></span-->\r\n                  <!--span class=\"ssd\">SSD</span>\r\n                  <span class=\"ssdbat fa fa-battery-0 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.ssdRate+'%'\" v-if=\"solt.status.brt_bmc_sys.ssdRate==0\"></span>\r\n                  <span class=\"ssdbat fa fa-battery-1 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.ssdRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.ssdRate>0&&solt.status.brt_bmc_sys.ssdRate<=20\"></span>\r\n                  <span class=\"ssdbat fa fa-battery-2 fa-fw\" style=\"color:green;\" :title=\"solt.status.brt_bmc_sys.ssdRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.ssdRate>20&&solt.status.brt_bmc_sys.ssdRate<=50\"></span>\r\n                  <span class=\"ssdbat fa fa-battery-3 fa-fw\" style=\"color:red;\" :title=\"solt.status.brt_bmc_sys.ssdRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.ssdRate>50&&solt.status.brt_bmc_sys.ssdRate<=80\"></span>\r\n                  <span class=\"ssdbat fa fa-battery-4 fa-fw\" style=\"color:red;\" :title=\"solt.status.brt_bmc_sys.ssdRate+'%'\" v-else-if=\"solt.status.brt_bmc_sys.ssdRate>80&&solt.status.brt_bmc_sys.ssdRate<=100\"></span-->\r\n                  <span class=\"name\">{{solt.name}}</span>\r\n                  <!--img src=\"../../assets/img/js.png\" class=\"name\"--> \r\n              </template>\r\n              <template v-else>\r\n                <img src=\"../../assets/img/statusfalse.jpg\" class=\"image\" />\r\n                <span class=\"name\">{{solt.name}}</span>\r\n              </template>\r\n          </ul>\r\n          </template>\r\n          \r\n      </div> \r\n   </div>   \r\n    <div class=\"filter-container\">\r\n      <div class=\"letf-items\" style=\"float: left; margin:10px 0%; position: relative;\">\r\n        <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>                                                         \r\n        </div>\r\n      <div style=\"float: left; \" class=\"center\">\r\n        <div>\r\n        <el-button style=\"width:100px;\" @click=\"Action(1)\">开机</el-button>  \r\n        </div>\r\n        <div>\r\n        <el-button style=\"width:100px;\" @click=\"Action(2)\">关机</el-button>  \r\n        </div>\r\n        <div>\r\n        <el-button style=\"width:100px;\" @click=\"Action(3)\">重启</el-button>  \r\n        </div>\r\n      </div>\r\n        <div class=\"right-items\" style=\"float: right; margin:5px -10px; position: relative;\" hidden>\r\n          <el-button>批量执行命令</el-button>\r\n      </div>\r\n  </div>          \r\n  </div>\r\n</template>\r\n<script>\r\nimport SoltStatus from '@/components/SoltStatus'\r\nvar list=[{name:'',status:'',cpu:'',memory:''}];\r\nexport default{\r\n  props: ['msg'],\r\n  data () {\r\n    return {\r\n      msg: this.msg,\r\n      solts:[],\r\n      checkAll: false,\r\n      checkedCities: [],\r\n      cities: [],\r\n      isIndeterminate: false,\r\n      IpmiCmdEnum:[],\r\n      form:{\r\n        cmdid: 0,\r\n        ids: []\r\n      },\r\n      viewclass:'bat fa fa-battery-0 fa-fw'\r\n    }\r\n  },\r\n  methods:{\r\n      msgTolist(){\r\n        var array=[];\r\n          for(var i=0;i<14;i++){\r\n            array.push(list[0]);\r\n          }\r\n        if(this.msg==null){    \r\n          this.solts=array;\r\n          return;\r\n        }\r\n         for(var i=0;i<this.msg.length;i++){     \r\n            if(this.msg[i].status.brt_bmc_sys!=null){\r\n              this.msg[i].status.brt_bmc_sys['ssdRate']  = Math.round((this.msg[i].status.brt_bmc_sys.usedSSDSize/this.msg[i].status.brt_bmc_sys.ssdsize)*100);\r\n              this.cities[i]= this.msg[i].deviceId;\r\n              array[this.msg[i].slotPosition-1]=this.msg[i];          \r\n            }else{\r\n              array[this.msg[i].slotPosition-1]=this.msg[i];   \r\n            }\r\n          }\r\n          this.solts=array;\r\n          console.log('222',this.solts);\r\n      },\r\n      //全选\r\n      handleCheckAllChange(val) {\r\n        this.checkedCities = val ? this.cities : [];\r\n        this.isIndeterminate = false;\r\n      },    \r\n      //单选及反选\r\n      handleCheckedCitiesChange(value) {\r\n        console.log('单选：'+value);  \r\n        this.form.ids=value;\r\n        let checkedCount = value.length;\r\n        this.checkAll = checkedCount === this.cities.length;\r\n        this.isIndeterminate = checkedCount > 0 && checkedCount < this.cities.length;\r\n      },\r\n      IpmiCmd(cmd){\r\n         console.log(\"cmd:\"+cmd);\r\n        //  setTimeout(\"Action(\"+cmd+\")\",2000);\r\n            // this.Action(cmd);\r\n            console.log(this.form);\r\n            this.$axios({\r\n                method: \"POST\",\r\n                url: '/sys/device/cmd/ipmi',\r\n                data: JSON.stringify(this.form),\r\n                headers: {\r\n                     'Content-Type': \"application/json\"\r\n                 },\r\n                 withCredentials:true,\r\n            }).then((res) => {\r\n                let data = res.data\r\n                if(data.code==0) {         \r\n                    this.$message.success('操作完成') ;               \r\n                } else {\r\n                    this.$message.error(data.msg || '操作失败')\r\n                }\r\n                this.uploadLoading = false\r\n            }).catch((e)=>{\r\n                this.uploadLoading = false\r\n                this.$message.error(e)\r\n            });\r\n      },\r\n      //命令\r\n      Action(cmd){\r\n        this.$axios({\r\n              method:\"get\",\r\n              url:'/getData/getEnum?enumName=IpmiCmdEnum',\r\n              withCredentials:true,\r\n          }).then(res => {\r\n              if(res.data.code==0){                                                    \r\n                   this.IpmiCmdEnum=res.data.data;\r\n                   for(var i=0;i<this.IpmiCmdEnum.length;i++){\r\n                      if(this.IpmiCmdEnum[i].code===cmd){ \r\n                       this.form.cmdid=this.IpmiCmdEnum[i].code;\r\n                       this.IpmiCmd();\r\n                     }\r\n                   }   \r\n                   \r\n              }else{\r\n                    this.$message.error(res.data.msg);\r\n              }\r\n          }).catch(error => {\r\n              this.$message.error('获取数据失败！');\r\n          });\r\n      }\r\n  },\r\n  //监听数据变化\r\n  watch: {\r\n    msg: {\r\n      handler(newVal) {\r\n        console.log('newVal',newVal);\r\n          this.msgTolist();\r\n        },\r\n        deep:true  \r\n    },\r\n  },\r\n  mounted:function(){\r\n     this.msgTolist();\r\n     //全选全不选\r\n        $(\"#checkAll\").click(function() {\r\n          $('input[name=\"check\"]').attr(\"checked\",this.checked); \r\n        });\r\n        var $subBox = $(\"input[name='check']\");\r\n        $subBox.click(function(){\r\n            $(\"#checkAll\").attr(\"checked\",$subBox.length == $(\"input[name='check']:checked\").length ? true : false);\r\n        });      \r\n\r\n      //反选*****\r\n  },\r\n  components: {\r\n    rateShow\r\n  }\r\n}\r\n</script>\r\n<style>\r\nul li{\r\n  list-style-type:none;\r\n}\r\n</style>"],"sourceRoot":"src/components/test"}]}