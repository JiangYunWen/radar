{"remainingRequest":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\radar\\src\\components\\CrateSolt\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\vue\\radar\\src\\components\\CrateSolt\\index.vue","mtime":1606991559062},{"path":"D:\\vue\\radar\\node_modules\\css-loader\\index.js","mtime":1596527927553},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1596528120680},{"path":"D:\\vue\\radar\\node_modules\\postcss-loader\\src\\index.js","mtime":1596528073198},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js","mtime":1596528120726}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nul li {\r\n    list-style-type: none;\r\n}\r\n\r\n.letf-items {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.right-items {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.el-header {\r\n    background-color: #B3C0D1;\r\n    color: #333;\r\n    text-align: center;\r\n    /* line-height: 60px; */\r\n    width: 1100px;\r\n    height: 90px;\r\n}\r\n\r\n.box {\r\n    /* width: 1000px;\r\n     height: 400px; */\r\n    display: flex;\r\n    ;\r\n    background-color: #E9EEF3;\r\n    /* border:1px solid black; */\r\n    /* flex-direction: column; */\r\n}\r\n\r\n.el-main {\r\n    display: flex;\r\n    background-color: #E9EEF3;\r\n    color: #333;\r\n    text-align: center;\r\n    line-height: 140px;\r\n    width: 1100px;\r\n    height: 435px;\r\n}\r\n\r\nbody>.el-container {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.cont {\r\n    position: relative;\r\n    width: auto;\r\n    height: 250px;\r\n    border: 1px solid black;\r\n    margin: 15px 2px;\r\n    display: flex;\r\n}\r\n\r\n/* 槽位*/\r\n.contsolt {\r\n    position: relative;\r\n    width: 50%;\r\n    height: 80%;\r\n    background-color: #e7e7e7;\r\n    border: 1px solid black;\r\n    margin: 10px 2px;\r\n}\r\n\r\n/* 复选框 */\r\n.checkbox {\r\n    position: absolute;\r\n    bottom: -30px;\r\n    left: 10px;\r\n}\r\n\r\n/* 状态 */\r\n.status {\r\n    position: relative;\r\n    top: 0%;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    left: 25%;\r\n    color: blue;\r\n}\r\n\r\n/* 状态显示 */\r\n.image {\r\n    position: relative;\r\n    width: 40%;\r\n    top: 15%;\r\n    left: 30%;\r\n}\r\n\r\n/* cpu数*/\r\n.cpu {\r\n    position: relative;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    top: 18%;\r\n    left: 25%;\r\n}\r\n\r\n/* cpu数值 */\r\n.bat {\r\n    position: relative;\r\n    top: 25%;\r\n    left: 30%;\r\n    width: 40%;\r\n    height: 18px;\r\n}\r\n\r\n/* 内存 */\r\n.memory {\r\n    position: relative;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    top: 26%;\r\n    left: 25%;\r\n}\r\n\r\n/* 内存数值 */\r\n.memorybat {\r\n    position: relative;\r\n    top: 35%;\r\n    left: 30%;\r\n}\r\n\r\n/* SSD */\r\n.ssd {\r\n    position: relative;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    top: 35%;\r\n    left: 25%;\r\n}\r\n\r\n/* 硬盘数值 */\r\n.ssdbat {\r\n    position: relative;\r\n    top: 45%;\r\n    left: 30%;\r\n}\r\n\r\n/* 刀片名称*/\r\n.name {\r\n    position: absolute;\r\n    font-size: 0.5em;\r\n    top: 90%;\r\n    left: 0%;\r\n    transform: scale(0.75);\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    display: inline-block;\r\n    /*将span当做块级元素对待*/\r\n    width: 25px;\r\n    /*限制宽度*/\r\n    text-align: center;\r\n}\r\n\r\n.name1 {\r\n    position: absolute;\r\n    font-size: 0.5em;\r\n    top: 90%;\r\n    left: 15%;\r\n    transform: scale(0.75);\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    display: inline-block;\r\n    /*将span当做块级元素对待*/\r\n    width: 25px;\r\n    /*限制宽度*/\r\n    text-align: center;\r\n}\r\n\r\n/* 电源刀片*/\r\n.dy {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.center {\r\n    position: relative;\r\n    left: 18%;\r\n\r\n}\r\n\r\n.center div {\r\n    position: relative;\r\n    display: inline-block;\r\n    margin: 5px 10px;\r\n}\r\n\r\n.moring {\r\n    position: absolute;\r\n    bottom: -30px;\r\n    left: 30%;\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmOA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/CrateSolt","sourcesContent":["<template>\r\n<div>\r\n    <div class=\"cont\">\r\n        <!--div class=\"contsolt\" v-for=\"solt in solts\" :key=\"solt.deviceId\" -->\r\n        <div class=\"contsolt\" v-for=\"index in 14\" :key=\"index\" solt=\"getslotobject(index)\">\r\n            <template v-if=\"getslotobject(index)===null\">\r\n                <span style=\" position: relative;left: 35%;top:2%\">{{index}}</span>\r\n            </template>\r\n            <!--template v-if=\"getslotobject(index).subtype===0\">\r\n                    <img src=\"../../assets/img/record.png\" class=\"dy\" />\r\n                    <span style=\" position: relative;left: 35%;bottom:100%\">{{index}}</span>\r\n                    <span class=\"name1\" v-if=\"getslotobject(index).name.length<5\">{{getslotobject(index).name}}</span>\r\n                    <span class=\"name\" v-else>{{getslotobject(index).name}}</span>\r\n                </template-->\r\n            <template v-else-if=\"getslotobject(index).subtype===5\">\r\n                <img src=\"../../assets/img/other.png\" class=\"dy\" />\r\n                <span style=\" position: relative;left: 35%;bottom:100%\">{{index}}</span>\r\n                <span class=\"name1\" v-if=\"getslotobject(index).name.length<5\">{{getslotobject(index).name}}</span>\r\n                <span class=\"name\" v-else>{{getslotobject(index).name}}</span>\r\n            </template>\r\n            <template v-else-if=\"getslotobject(index).subtype===7\">\r\n                <img src=\"../../assets/img/record.jpg\" class=\"dy\" />\r\n                <span style=\" position: relative;left: 35%;bottom:100%\">{{index}}</span>\r\n                <span class=\"name1\" v-if=\"getslotobject(index).name.length<5\">{{getslotobject(index).name}}</span>\r\n                <span class=\"name\" v-else>{{getslotobject(index).name}}</span>\r\n            </template>\r\n            <template v-else>\r\n                <ul>\r\n                    <span style=\" position: relative;left: 35%;\">{{index}}</span>\r\n                    <li> <span class=\"status\">状态</span></li>\r\n                    <template v-if=\"getslotobject(index).alive==true\">\r\n                        <el-checkbox-group class=\"moring\" v-model=\"checkedCities\" @change=\"handleCheckedCitiesChange\">\r\n                            <el-checkbox :label=\"getslotobject(index).deviceId\" :key=\"getslotobject(index).deviceId\">\r\n                                <span hidden> {{getslotobject(index).deviceId}}</span>\r\n                            </el-checkbox>\r\n                        </el-checkbox-group>\r\n                        <li><img src=\"../../assets/img/statustrue.jpg\" class=\"image\" /></li>\r\n                        <SoltStatus v-bind:showdata=\"{\r\n                            titlename:'CPU',titleclass:'cpu',msgclass:'bat fa fa-fw', showico:'fa-battery-',value:getslotobject(index).status.brt_bmc_sys.cpurate}\" v-if=\"getslotobject(index).status.brt_bmc_sys.cpurate!==undefined\">\r\n                        </SoltStatus>\r\n\r\n                        <SoltStatus v-bind:showdata=\"{\r\n                        titlename:'内存',titleclass:'memory',msgclass:'memorybat fa fa-fw', showico:'fa-battery-',value:getslotobject(index).status.brt_bmc_sys.memRate}\" v-if=\"getslotobject(index).status.brt_bmc_sys.memRate!==undefined\">\r\n                        </SoltStatus>\r\n\r\n                        <SoltStatus v-bind:showdata=\"{\r\n                        titlename:'SSD',titleclass:'ssd',msgclass:'ssdbat fa fa-fw', showico:'fa-battery-',value:getslotobject(index).status.brt_bmc_sys.SSDRate}\" v-if=\"!isNaN(getslotobject(index).status.brt_bmc_sys.SSDRate)\">\r\n                        </SoltStatus>\r\n\r\n                        <span class=\"name1\" v-if=\"getslotobject(index).name.length<5\">{{getslotobject(index).name}}</span>\r\n                        <span class=\"name\" v-else>{{getslotobject(index).name}}</span>\r\n                    </template>\r\n                    <template v-else>\r\n                        <img src=\"../../assets/img/statusfalse.jpg\" class=\"image\" />\r\n                        <span class=\"name1\" v-if=\"getslotobject(index).name.length<5\">{{getslotobject(index).name}}</span>\r\n                        <span class=\"name\" v-else>{{getslotobject(index).name}}</span>\r\n                    </template>\r\n                </ul>\r\n            </template>\r\n\r\n        </div>\r\n    </div>\r\n    <div class=\"filter-container\">\r\n        <div class=\"letf-items\" style=\"float: left; margin:10px 0%; position: relative;\">\r\n            <el-checkbox :indeterminate=\"isIndeterminate\" v-model=\"checkAll\" @change=\"handleCheckAllChange\">全选</el-checkbox>\r\n        </div>\r\n        <div style=\"float: left; \" class=\"center\">\r\n            <div>\r\n                <el-button style=\"width:100px;\" @click=\"Action(1)\">开机</el-button>\r\n            </div>\r\n            <div>\r\n                <el-button style=\"width:100px;\" @click=\"Action(2)\">关机</el-button>\r\n            </div>\r\n            <div>\r\n                <el-button style=\"width:100px;\" @click=\"Action(3)\">重启</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"right-items\" style=\"float: right; margin:5px -10px; position: relative;\" hidden>\r\n            <el-button>批量执行命令</el-button>\r\n        </div>\r\n    </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport SoltStatus from '@/components/SoltStatus'\r\nvar list = [{\r\n    name: '',\r\n    status: '',\r\n    cpu: '',\r\n    memory: ''\r\n}];\r\nexport default {\r\n    components: {\r\n        SoltStatus\r\n    },\r\n    props: ['msg'],\r\n    data() {\r\n        return {\r\n            msg: this.msg,\r\n            solts: [],\r\n            solt: {},\r\n            checkAll: false,\r\n            checkedCities: [],\r\n            cities: [],\r\n            isIndeterminate: false,\r\n            IpmiCmdEnum: [],\r\n            form: {\r\n                cmdid: 0,\r\n                ids: []\r\n            },\r\n            viewclass: 'bat fa fa-battery-0 fa-fw'\r\n        }\r\n    },\r\n    methods: {\r\n        msgTolist() {\r\n            var array = [];\r\n            for (var i = 0; i < 14; i++) {\r\n                array.push(list[0]);\r\n            }\r\n            if (this.msg == null) {\r\n                this.solts = array;\r\n                return;\r\n            }\r\n            for (var i = 0; i < this.msg.length; i++) {\r\n                if (this.msg[i].status.brt_bmc_sys != null) {\r\n                    this.msg[i].status.brt_bmc_sys['ssdRate'] = Math.round((this.msg[i].status.brt_bmc_sys.usedSSDSize / this.msg[i].status.brt_bmc_sys.ssdsize) * 100);\r\n                    this.cities[i] = this.msg[i].deviceId;\r\n                    array[this.msg[i].slotPosition - 1] = this.msg[i];\r\n                } else {\r\n                    array[this.msg[i].slotPosition - 1] = this.msg[i];\r\n                }\r\n            }\r\n            this.solts = array;\r\n        },\r\n        //全选\r\n        handleCheckAllChange(val) {\r\n            this.checkedCities = val ? this.cities : [];\r\n            this.isIndeterminate = false;\r\n        },\r\n        //单选及反选\r\n        handleCheckedCitiesChange(value) {\r\n            this.form.ids = value;\r\n            let checkedCount = value.length;\r\n            this.checkAll = checkedCount === this.cities.length;\r\n            this.isIndeterminate = checkedCount > 0 && checkedCount < this.cities.length;\r\n        },\r\n        IpmiCmd(cmd) {\r\n            this.$axios({\r\n                method: \"POST\",\r\n                url: '/sys/device/cmd/ipmi',\r\n                data: JSON.stringify(this.form),\r\n                headers: {\r\n                    'Content-Type': \"application/json\"\r\n                },\r\n                withCredentials: true,\r\n            }).then((res) => {\r\n                let data = res.data\r\n                if (data.code == 0) {\r\n                    this.$message.success('操作完成');\r\n                } else {\r\n                    this.$message.error(data.msg || '操作失败')\r\n                }\r\n                this.uploadLoading = false\r\n            }).catch((e) => {\r\n                this.uploadLoading = false\r\n                this.$message.error(e)\r\n            });\r\n        },\r\n        //命令\r\n        Action(cmd) {\r\n            this.$axios({\r\n                method: \"get\",\r\n                url: '/getData/getEnum?enumName=IpmiCmdEnum',\r\n                withCredentials: true,\r\n            }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    this.IpmiCmdEnum = res.data.data;\r\n                    for (var i = 0; i < this.IpmiCmdEnum.length; i++) {\r\n                        if (this.IpmiCmdEnum[i].code === cmd) {\r\n                            this.form.cmdid = this.IpmiCmdEnum[i].code;\r\n                            this.IpmiCmd();\r\n                        }\r\n                    }\r\n                } else {\r\n                    this.$message.error(res.data.msg);\r\n                }\r\n            }).catch(error => {\r\n                this.$message.error('获取数据失败！');\r\n            });\r\n        },\r\n        getslotobject(index) {\r\n            var result = null\r\n            for (var ss in this.solts) {\r\n                if (this.solts[ss].slotPosition === index) {\r\n                    result = this.solts[ss];\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n    },\r\n    //监听数据变化\r\n    watch: {\r\n        msg: {\r\n            handler(newVal) {\r\n                // this.msgTolist();\r\n            },\r\n            deep: true\r\n        },\r\n    },\r\n    mounted: function () {\r\n        this.msgTolist();\r\n        //全选全不选\r\n        $(\"#checkAll\").click(function () {\r\n            $('input[name=\"check\"]').attr(\"checked\", this.checked);\r\n        });\r\n        var $subBox = $(\"input[name='check']\");\r\n        $subBox.click(function () {\r\n            $(\"#checkAll\").attr(\"checked\", $subBox.length == $(\"input[name='check']:checked\").length ? true : false);\r\n        });\r\n\r\n        //反选*****\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\nul li {\r\n    list-style-type: none;\r\n}\r\n\r\n.letf-items {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.right-items {\r\n    margin-bottom: 10px;\r\n}\r\n\r\n.el-header {\r\n    background-color: #B3C0D1;\r\n    color: #333;\r\n    text-align: center;\r\n    /* line-height: 60px; */\r\n    width: 1100px;\r\n    height: 90px;\r\n}\r\n\r\n.box {\r\n    /* width: 1000px;\r\n     height: 400px; */\r\n    display: flex;\r\n    ;\r\n    background-color: #E9EEF3;\r\n    /* border:1px solid black; */\r\n    /* flex-direction: column; */\r\n}\r\n\r\n.el-main {\r\n    display: flex;\r\n    background-color: #E9EEF3;\r\n    color: #333;\r\n    text-align: center;\r\n    line-height: 140px;\r\n    width: 1100px;\r\n    height: 435px;\r\n}\r\n\r\nbody>.el-container {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.cont {\r\n    position: relative;\r\n    width: auto;\r\n    height: 250px;\r\n    border: 1px solid black;\r\n    margin: 15px 2px;\r\n    display: flex;\r\n}\r\n\r\n/* 槽位*/\r\n.contsolt {\r\n    position: relative;\r\n    width: 50%;\r\n    height: 80%;\r\n    background-color: #e7e7e7;\r\n    border: 1px solid black;\r\n    margin: 10px 2px;\r\n}\r\n\r\n/* 复选框 */\r\n.checkbox {\r\n    position: absolute;\r\n    bottom: -30px;\r\n    left: 10px;\r\n}\r\n\r\n/* 状态 */\r\n.status {\r\n    position: relative;\r\n    top: 0%;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    left: 25%;\r\n    color: blue;\r\n}\r\n\r\n/* 状态显示 */\r\n.image {\r\n    position: relative;\r\n    width: 40%;\r\n    top: 15%;\r\n    left: 30%;\r\n}\r\n\r\n/* cpu数*/\r\n.cpu {\r\n    position: relative;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    top: 18%;\r\n    left: 25%;\r\n}\r\n\r\n/* cpu数值 */\r\n.bat {\r\n    position: relative;\r\n    top: 25%;\r\n    left: 30%;\r\n    width: 40%;\r\n    height: 18px;\r\n}\r\n\r\n/* 内存 */\r\n.memory {\r\n    position: relative;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    top: 26%;\r\n    left: 25%;\r\n}\r\n\r\n/* 内存数值 */\r\n.memorybat {\r\n    position: relative;\r\n    top: 35%;\r\n    left: 30%;\r\n}\r\n\r\n/* SSD */\r\n.ssd {\r\n    position: relative;\r\n    font-size: 0.5em;\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    top: 35%;\r\n    left: 25%;\r\n}\r\n\r\n/* 硬盘数值 */\r\n.ssdbat {\r\n    position: relative;\r\n    top: 45%;\r\n    left: 30%;\r\n}\r\n\r\n/* 刀片名称*/\r\n.name {\r\n    position: absolute;\r\n    font-size: 0.5em;\r\n    top: 90%;\r\n    left: 0%;\r\n    transform: scale(0.75);\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    display: inline-block;\r\n    /*将span当做块级元素对待*/\r\n    width: 25px;\r\n    /*限制宽度*/\r\n    text-align: center;\r\n}\r\n\r\n.name1 {\r\n    position: absolute;\r\n    font-size: 0.5em;\r\n    top: 90%;\r\n    left: 15%;\r\n    transform: scale(0.75);\r\n    white-space: nowrap;\r\n    /*强制span不换行*/\r\n    display: inline-block;\r\n    /*将span当做块级元素对待*/\r\n    width: 25px;\r\n    /*限制宽度*/\r\n    text-align: center;\r\n}\r\n\r\n/* 电源刀片*/\r\n.dy {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n\r\n.center {\r\n    position: relative;\r\n    left: 18%;\r\n\r\n}\r\n\r\n.center div {\r\n    position: relative;\r\n    display: inline-block;\r\n    margin: 5px 10px;\r\n}\r\n\r\n.moring {\r\n    position: absolute;\r\n    bottom: -30px;\r\n    left: 30%;\r\n}\r\n</style>\r\n"]}]}