{"remainingRequest":"D:\\vue\\radar\\node_modules\\thread-loader\\dist\\cjs.js!D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\radar\\src\\components\\CountSolt\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\radar\\src\\components\\CountSolt\\index.vue","mtime":1600311235696},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1596528110531},{"path":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js","mtime":1596527889887},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js","mtime":1596528120726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport RightPanel from '@/components/RightPanel';\nimport Settings from '@/components/Settings';\nexport default {\n  props: ['item'],\n  components: {\n    RightPanel: RightPanel,\n    Settings: Settings\n  },\n  data: function data() {\n    return {\n      activeName: 'first',\n      input: 1,\n      checked: false,\n      cpu: '',\n      ssd: '',\n      mem: '',\n      rx: '',\n      tx: '',\n      series_data: new Array(),\n      legend_names: new Array(),\n      rx_name: new Array(),\n      rx_data: new Array(),\n      tx_name: new Array(),\n      tx_data: new Array(),\n      drawer: false,\n      drawerWidth: '500px'\n    };\n  },\n  //监听数据变化\n  watch: {\n    item: {\n      handler: function handler(newVal) {\n        console.log('item', newVal);\n        this.item = newVal;\n        this.getCPURate();\n      },\n      deep: true\n    }\n  },\n  methods: {\n    getrealtime: function getrealtime() {\n      var _this = this;\n\n      this.legend_names = [];\n      this.series_data = [];\n      this.$axios({\n        method: \"get\",\n        url: 'sys/device/status/realtime/id?deviceId=' + this.item.deviceId,\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          for (var key in res.data.cpu.series) {\n            _this.legend_names.push(key);\n\n            var swpdata = {};\n            swpdata['name'] = key;\n            swpdata['type'] = \"line\";\n            swpdata['data'] = res.data.cpu.series[key];\n\n            _this.series_data.push(swpdata);\n          } // this.legend_names.shift();\n          // this.series_data.shift();\n          // res.data.cpu.times.shift();\n\n\n          console.log(_this.legend_names);\n          console.log(_this.series_data);\n\n          var myChart = _this.$echarts.init(document.getElementById('myChart'));\n\n          myChart.setOption({\n            legend: {\n              data: _this.legend_names,\n              bottom: 0\n            },\n            xAxis: {\n              data: res.data.cpu.date\n            },\n            series: _this.series_data\n          });\n        } else {\n          _this.$message.error(res.data.msg);\n        }\n      }).catch(function (error) {\n        _this.$message.error('获取数据失败！');\n\n        console.log(error);\n      });\n    },\n    getCPURate: function getCPURate() {\n      var _this2 = this;\n\n      this.legend_names = [];\n      this.series_data = [];\n      this.$axios({\n        method: \"post\",\n        url: '/sys/device/status',\n        data: JSON.stringify({\n          id: this.item.deviceId,\n          \"isSub\": true,\n          \"keys\": [\"bht_host_sys\", \"nettx\", \"netrx\", \"brt_bmc_sys\"]\n        }),\n        headers: {\n          'Content-Type': \"application/json\"\n        },\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          var items = res.data.data.status;\n\n          _this2.getSSDRate(items);\n\n          _this2.getMemRate(items);\n\n          _this2.getnettx(items);\n\n          _this2.getnetrx(items);\n\n          console.log('items', items);\n\n          for (var key in items.bht_host_sys.cpu.series) {\n            _this2.legend_names.push(key);\n\n            var swpdata = {};\n            swpdata['name'] = key;\n            swpdata['type'] = \"line\";\n            swpdata['data'] = items.bht_host_sys.cpu.series[key];\n\n            _this2.series_data.push(swpdata);\n          } // this.legend_names.shift();\n          // this.series_data.shift();\n          // res.items.bht_host_sys.cpu.times.shift();\n\n\n          var myChart = _this2.$echarts.init(document.getElementById('myChart'));\n\n          myChart.setOption({\n            legend: {\n              data: _this2.legend_names,\n              bottom: 0\n            },\n            xAxis: {\n              data: items.bht_host_sys.cpu.times\n            },\n            series: _this2.series_data\n          });\n        } else {\n          _this2.$message.error(res.data.msg);\n\n          clearInterval(_this2.cpu);\n        }\n      }).catch(function (error) {\n        _this2.$message.error('获取数据失败！');\n\n        clearInterval(_this2.cpu);\n      });\n    },\n    getnetrx: function getnetrx(items) {\n      this.rx_name = [];\n      this.rx_data = [];\n\n      for (var key in items.bht_host_sys.netrx.series) {\n        this.rx_name.push(key);\n        var swpdata = {};\n        swpdata['name'] = key;\n        swpdata['type'] = \"line\";\n        swpdata['data'] = items.bht_host_sys.netrx.series[key];\n        this.rx_data.push(swpdata);\n      }\n\n      var myChart = this.$echarts.init(document.getElementById('Chartnetout'));\n      myChart.setOption({\n        legend: {\n          data: this.rx_name,\n          bottom: 0\n        },\n        xAxis: {\n          data: items.bht_host_sys.netrx.date\n        },\n        series: this.rx_data\n      });\n    },\n    getnettx: function getnettx(items) {\n      this.tx_name = [];\n      this.tx_data = [];\n\n      for (var key in items.bht_host_sys.nettx.series) {\n        this.tx_name.push(key);\n        var swpdata = {};\n        swpdata['name'] = key;\n        swpdata['type'] = \"line\";\n        swpdata['data'] = items.bht_host_sys.nettx.series[key];\n        this.tx_data.push(swpdata);\n      }\n\n      var myChart = this.$echarts.init(document.getElementById('Chartnetin'));\n      myChart.setOption({\n        legend: {\n          data: this.tx_name,\n          bottom: 0\n        },\n        xAxis: {\n          data: items.bht_host_sys.nettx.date\n        },\n        series: this.tx_data\n      });\n    },\n    getSSDRate: function getSSDRate(items) {\n      var myChart = this.$echarts.init(document.getElementById('container2'));\n      myChart.setOption({\n        series: [{\n          data: [{\n            value: items.brt_bmc_sys.SSDRate,\n            name: '已占用磁盘'\n          }, {\n            value: 100 - items.brt_bmc_sys.SSDRate,\n            name: '未占用磁盘'\n          }]\n        }]\n      });\n    },\n    getMemRate: function getMemRate(items) {\n      var myChart = this.$echarts.init(document.getElementById('container'));\n      myChart.setOption({\n        series: [{\n          data: [{\n            value: items.brt_bmc_sys.memRate,\n            name: '已占用内存'\n          }, {\n            value: 100 - items.brt_bmc_sys.memRate,\n            name: '未占用内存'\n          }]\n        }]\n      });\n    },\n    checkedFun: function checkedFun(e, checkedFresh) {\n      localStorage.setItem(\"check\", e);\n      console.log(e);\n\n      if (e == true) {\n        this.cpu = setInterval(this.getCPURate, parseInt(this.input) * 500);\n      } else if (e == false) {\n        clearInterval(this.cpu);\n      }\n    }\n  },\n  mounted: function mounted() {\n    this.getCPURate();\n    $(\"#times\").attr(\"checked\", localStorage.getItem('check'));\n  }\n};",null]}