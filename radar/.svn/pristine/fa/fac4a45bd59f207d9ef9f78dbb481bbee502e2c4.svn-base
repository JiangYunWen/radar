{"remainingRequest":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\radar\\src\\components\\CountSolt\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\radar\\src\\components\\CountSolt\\index.vue","mtime":1600313285262},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1596528110531},{"path":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js","mtime":1596527889887},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js","mtime":1596528120726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport RightPanel from '@/components/RightPanel'\r\nimport Settings from '@/components/Settings'\r\nexport default {\r\n    props: ['item'],\r\n    components: {\r\n        RightPanel,\r\n        Settings,\r\n    },\r\n    data() {\r\n        return {\r\n            activeName: 'first',\r\n            input: 1,\r\n            checked: false,\r\n            cpu: '',\r\n            ssd: '',\r\n            mem: '',\r\n            rx: '',\r\n            tx: '',\r\n            series_data: new Array(),\r\n            legend_names: new Array(),\r\n            rx_name: new Array(),\r\n            rx_data: new Array(),\r\n            tx_name: new Array(),\r\n            tx_data: new Array(),\r\n            drawer: false,\r\n            drawerWidth: '500px',\r\n            strdata: []\r\n        }\r\n    },\r\n    //监听数据变化\r\n    watch: {\r\n        item: {\r\n            handler(newVal) {\r\n                console.log('item', newVal);\r\n                this.item = newVal;\r\n                this.getCPURate();\r\n            },\r\n            deep: true\r\n        },\r\n    },\r\n    methods: {\r\n        getrealtime() {\r\n            this.legend_names = [];\r\n            this.series_data = [];\r\n            this.$axios({\r\n                method: \"get\",\r\n                url: 'sys/device/status/realtime/id?deviceId=' + this.item.deviceId,\r\n                withCredentials: true,\r\n            }).then(res => {\r\n                if (res.data.code == 0) {\r\n\r\n                    for (var key in res.data.cpu.series) {\r\n                        this.legend_names.push(key);\r\n                        var swpdata = {};\r\n                        swpdata['name'] = key;\r\n                        swpdata['type'] = \"line\";\r\n                        swpdata['data'] = res.data.cpu.series[key];\r\n                        this.series_data.push(swpdata);\r\n\r\n                    }\r\n                    // this.legend_names.shift();\r\n                    // this.series_data.shift();\r\n                    // res.data.cpu.times.shift();\r\n                    console.log(this.legend_names);\r\n                    console.log(this.series_data);\r\n                    let myChart = this.$echarts.init(document.getElementById('myChart'));\r\n                    myChart.setOption({\r\n                        legend: {\r\n                            data: this.legend_names,\r\n                            bottom: 0\r\n                        },\r\n                        xAxis: {\r\n                            data: res.data.cpu.date\r\n                        },\r\n                        series: this.series_data\r\n                    });\r\n                } else {\r\n                    this.$message.error(res.data.msg);\r\n                }\r\n            }).catch(error => {\r\n                this.$message.error('获取数据失败！');\r\n                console.log(error);\r\n            });\r\n        },\r\n        getCPURate() {\r\n            this.legend_names = [];\r\n            this.series_data = [];\r\n            this.$axios({\r\n                method: \"post\",\r\n                url: '/sys/device/status',\r\n                data: JSON.stringify({\r\n                    id: this.item.deviceId,\r\n                    \"isSub\": true,\r\n                    \"keys\": [\r\n                        \"bht_host_sys\", \"nettx\", \"netrx\", \"brt_bmc_sys\"\r\n                    ]\r\n                }),\r\n                headers: {\r\n                    'Content-Type': \"application/json\"\r\n                },\r\n                withCredentials: true,\r\n            }).then(res => {\r\n                if (res.data.code == 0) {\r\n                    var items = res.data.data.status;\r\n                    this.strdata = res.data.data.status;\r\n                    this.getSSDRate(items);\r\n                    this.getMemRate(items);\r\n                    this.getnettx(items);\r\n                    this.getnetrx(items);\r\n                    console.log(' this.strdata', this.strdata);\r\n                    for (var key in items.bht_host_sys.cpu.series) {\r\n                        this.legend_names.push(key);\r\n                        var swpdata = {};\r\n                        swpdata['name'] = key;\r\n                        swpdata['type'] = \"line\";\r\n                        swpdata['data'] = items.bht_host_sys.cpu.series[key];\r\n                        this.series_data.push(swpdata);\r\n                    }\r\n                    // this.legend_names.shift();\r\n                    // this.series_data.shift();\r\n                    // res.items.bht_host_sys.cpu.times.shift();\r\n\r\n                    let myChart = this.$echarts.init(document.getElementById('myChart'));\r\n                    myChart.setOption({\r\n                        legend: {\r\n                            data: this.legend_names,\r\n                            bottom: 0\r\n                        },\r\n                        xAxis: {\r\n                            data: items.bht_host_sys.cpu.times\r\n                        },\r\n                        series: this.series_data\r\n                    });\r\n\r\n                } else {\r\n                    this.$message.error(res.data.msg);\r\n                    clearInterval(this.cpu);\r\n                }\r\n            }).catch(error => {\r\n                this.$message.error('获取数据失败！');\r\n                clearInterval(this.cpu);\r\n            });\r\n        },\r\n        getnetrx(items) {\r\n            this.rx_name = [];\r\n            this.rx_data = [];\r\n            for (var key in items.bht_host_sys.netrx.series) {\r\n                this.rx_name.push(key);\r\n                var swpdata = {};\r\n                swpdata['name'] = key;\r\n                swpdata['type'] = \"line\";\r\n                swpdata['data'] = items.bht_host_sys.netrx.series[key];\r\n                this.rx_data.push(swpdata);\r\n            }\r\n            let myChart = this.$echarts.init(document.getElementById('Chartnetout'));\r\n            myChart.setOption({\r\n                legend: {\r\n                    data: this.rx_name,\r\n                    bottom: 0\r\n                },\r\n                xAxis: {\r\n                    data: items.bht_host_sys.netrx.date\r\n                },\r\n                series: this.rx_data\r\n            });\r\n        },\r\n        getnettx(items) {\r\n            this.tx_name = [];\r\n            this.tx_data = [];\r\n            for (var key in items.bht_host_sys.nettx.series) {\r\n                this.tx_name.push(key);\r\n                var swpdata = {};\r\n                swpdata['name'] = key;\r\n                swpdata['type'] = \"line\";\r\n                swpdata['data'] = items.bht_host_sys.nettx.series[key];\r\n                this.tx_data.push(swpdata);\r\n            }\r\n            let myChart = this.$echarts.init(document.getElementById('Chartnetin'));\r\n            myChart.setOption({\r\n                legend: {\r\n                    data: this.tx_name,\r\n                    bottom: 0\r\n                },\r\n                xAxis: {\r\n                    data: items.bht_host_sys.nettx.date\r\n                },\r\n                series: this.tx_data\r\n            });\r\n        },\r\n        getSSDRate(items) {\r\n            let myChart = this.$echarts.init(document.getElementById('container2'));\r\n            myChart.setOption({\r\n                series: [{\r\n                    data: [{\r\n                            value: items.brt_bmc_sys.SSDRate,\r\n                            name: '已占用磁盘'\r\n                        },\r\n                        {\r\n                            value: 100 - items.brt_bmc_sys.SSDRate,\r\n                            name: '未占用磁盘'\r\n                        }\r\n                    ]\r\n                }]\r\n            });\r\n        },\r\n        getMemRate(items) {\r\n            let myChart = this.$echarts.init(document.getElementById('container'));\r\n            myChart.setOption({\r\n                series: [{\r\n                    data: [{\r\n                            value: items.brt_bmc_sys.memRate,\r\n                            name: '已占用内存'\r\n                        },\r\n                        {\r\n                            value: 100 - items.brt_bmc_sys.memRate,\r\n                            name: '未占用内存'\r\n                        }\r\n                    ]\r\n                }]\r\n            });\r\n        },\r\n        checkedFun(e, checkedFresh) {\r\n            localStorage.setItem(\"check\", e);\r\n            console.log(e);\r\n            if (e == true) {\r\n                this.cpu = setInterval(this.getCPURate, (parseInt(this.input) * 500));\r\n            } else if (e == false) {\r\n                clearInterval(this.cpu);\r\n            }\r\n        }\r\n    },\r\n    mounted: function () {\r\n\r\n        this.getCPURate();\r\n        $(\"#times\").attr(\"checked\", localStorage.getItem('check'))\r\n\r\n    }\r\n}\r\n",null]}