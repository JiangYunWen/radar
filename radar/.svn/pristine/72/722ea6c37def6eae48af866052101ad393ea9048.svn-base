<template>
<div class="container">
  <el-tabs v-model="activeName" type="card" @tab-click="handleClick">
    <el-tab-pane label="配置" name="first">
        <el-container>                        
              <div >              
                <el-row :gutter="20" >
                 <el-col :span="12"  v-for="device in items" :key="device.id">
                   <el-card shadow="hover" class="mgb20" >
                      <div slot="header" class="clearfix">
                            <span>{{device.name}}</span>
                      </div>                    
                      <CrateSolt :msg="device.list"/>                                  
                   </el-card>               
                </el-col>           
                </el-row>               
              </div>
        </el-container>
    </el-tab-pane>
    <!--el-tab-pane label="状态" name="second" >
                <el-col :span="16">
                <el-row :gutter="20" class="mgb20">
                    <el-col :span="12">
                        <el-card shadow="hover" :body-style="{padding: '0px'}" style="height:400px;width:1000px;">
                        <div slot="header" class="clearfix">
                            <span>风扇转速</span>
                       </div>    
                            <div id="myChart" :style="{width: '1000px', height: '350px'}"></div>
                        </el-card>
                    </el-col>
                </el-row>
                <el-row :gutter="20" class="mgb20">
                    <el-col :span="12">
                        <el-card shadow="hover" :body-style="{padding: '0px'}" style="height:400px;width:1000px;">
                        <div slot="header" class="clearfix">
                            <span>机箱温度</span>
                       </div>    
                            <div id="myChart2" :style="{width: '1000px', height: '350px'}"></div>
                        </el-card>
                    </el-col>
                </el-row>
            </el-col>      
    </el-tab-pane-->
    <el-tab-pane label="报警" name="second">
               <warn />
    </el-tab-pane>
  </el-tabs>
</div>

</template>

<script>
import warn from '@/components/utils/warn';
import CrateSolt from '@/components/CrateSolt';

const cityOptions = ['上海', '北京', '广州', '深圳'];
export default {
    components:{
        CrateSolt,
        warn
    },
    data() {
     return {
        query: {
                grade: '',
                limit:10,
                pageIndex: 1,
                pageSize: 10
        },
        activeName: 'first',
        checkAll: false,
        checkedCities: ['上海', '北京'],
        cities: cityOptions,
        isIndeterminate: true,
        items:[],
        pageTotal: 0,
        tableData1: [],
      };
  },
    methods: {    
        handleClick(e){
            if(e.name==='second'){
                this.getData();
            }
        },
        // 获取报警的模拟数据
        getData(str) {
                this.$axios({
                    method:"post",
                    url:'/sys/warn/listData',
                    data:JSON.stringify({
                        page:this.query.pageIndex,
                        limit:this.query.pageSize,
                        grade:this.query.grade
                    }),
                    headers: {
                     'Content-Type': "application/json"
                   },
                    withCredentials:true,
                }).then(res => {
                    if(res.data.code==0){                                                     
                        this.tableData1 = res.data.page.list;
                        this.pageTotal = res.data.page.total || 10;//数据总数
                        this.query.pageIndex=res.data.page.page;//当前页
                        this.query.pageSize=res.data.page.limit;//1页数据
                    }else{
                         this.$message.error(res.data.msg);
                    }
                }).catch(error => {
                    this.$message.error('获取数据失败！');
                });
        }, 
      //机箱数据获取
      getDevice(){
                this.$axios({
                    method:"post",
                    url:'/sys/device/status',
                    data:JSON.stringify({
                        isSub:true,
                        keys:['brt_bmc_sys']
                    }),
                    headers: {
                     'Content-Type': "application/json"
                   },
                    withCredentials:true,
                }).then(res => {
                    if(res.data.code===0){ 
                         this.items=res.data.data.list;    
                    }else{
                         this.$message.error(res.data.msg);
                    }
                }).catch(error => {
                    this.$message.error('获取数据失败！');
                });
      },
    },
   mounted: function() {
       this.getDevice();
      
   }

};
</script>

<style >

.letf-items{
margin-bottom: 10px;
}

.right-items{
margin-bottom: 10px;
}
  .el-header {
    background-color: #B3C0D1;
    color: #333;
    text-align: center;
    /* line-height: 60px; */
    width: 1100px;
    height: 90px;
  }
  

  .box{
  /* width: 1000px;
     height: 400px; */
     display: flex; ;
     background-color: #E9EEF3;
	/* border:1px solid black; */
    /* flex-direction: column; */
  }
  .el-main {
      display: flex; 
      background-color: #E9EEF3;
      color: #333;
      text-align: center;
      line-height: 140px;
      width: 1100px;
      height: 435px;
    }
  
  body > .el-container {
    margin-bottom: 20px;
  }

  .cont{
      position: relative;
      width:auto;
      height: 250px;
      border:1px solid black;
      margin: 15px 2px;
      display: flex;
  }

/* 槽位*/
.contsolt{
      position: relative;
      width:50%; 
      height:80%;
      background-color: #e7e7e7; 
      border:1px solid black;
      margin: 10px 2px;
}

  /* 复选框 */
.checkbox{
    position: absolute;
    bottom:-30px;
    left: 10px;
}
  /* 状态 */
.status{
    position: relative;
    top:0%;
    font-size: 0.5em;
    white-space: nowrap;  /*强制span不换行*/
    left: 25%;
    color:blue;
}
  /* 状态显示 */
  .image {
     position: relative; 
     width: 40%;  
     top:15%;
     left: 30%;
}
  /* cpu数*/
  .cpu{
    position: relative;
    font-size: 0.5em;
    white-space: nowrap;  /*强制span不换行*/
    top:18%;
    left: 25%;
  }
  /* cpu数值 */
  .bat{
    position: relative;
    top:25%;
    left: 30%;
    width: 40%;
    height: 18px;
  }
  /* 内存 */
  .memory{
    position: relative;
    font-size: 0.5em;
    white-space: nowrap;  /*强制span不换行*/
    top:26%;
    left: 25%;
  }
  /* 内存数值 */
  .memorybat{
    position: relative;
    top:35%;
    left: 30%;
  }
 /* SSD */
  .ssd{
    position: relative;
    font-size: 0.5em;
    white-space: nowrap;  /*强制span不换行*/
    top:35%;
    left: 25%;
  }
  /* 硬盘数值 */
  .ssdbat{
    position: relative;
    top:45%;
    left: 30%;
  }

  /* 刀片名称*/
  .name{
    position: absolute;
    font-size: 0.5em;
    top:90%;
    left: 0%;
    transform: scale(0.75);
    white-space: nowrap;  /*强制span不换行*/
    display: inline-block;  /*将span当做块级元素对待*/
    width: 25px;  /*限制宽度*/
    text-align: center;
  }

    .name1{
    position: absolute;
    font-size: 0.5em;
    top:90%;
    left: 15%;
    transform: scale(0.75);
    white-space: nowrap;  /*强制span不换行*/
    display: inline-block;  /*将span当做块级元素对待*/
    width: 25px;  /*限制宽度*/
    text-align: center;
  }

/* 电源刀片*/
  .dy{
      position: relative;
      width:100%;
      height:100%;
  }

.center{
    position: relative;
    left: 18%;
    
}

.center div{
    position: relative;
    display: inline-block;
    margin: 5px 10px;
}

.moring{
    position: absolute;
    bottom:-30px;
    left: 30%;
}
  
</style>