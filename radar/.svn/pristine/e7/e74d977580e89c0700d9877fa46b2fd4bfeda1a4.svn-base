{"remainingRequest":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js!D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\vue\\radar\\src\\components\\DeviceStatus\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\vue\\radar\\src\\components\\DeviceStatus\\index.vue","mtime":1597110351454},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\babel-loader\\lib\\index.js","mtime":1596527889887},{"path":"D:\\vue\\radar\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596527896256},{"path":"D:\\vue\\radar\\node_modules\\vue-loader\\lib\\index.js","mtime":1596528120726}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { fetchData } from \"../../api/index\";\nimport layer from \"layui-layer\";\nvar myChartfan = '';\nvar myChartji = '';\nexport default {\n  data: function data() {\n    return {\n      activeName: 'first',\n      protectT: '',\n      warnT: '',\n      series_data: [],\n      legend_names: [],\n      fan_data: [],\n      fan_names: [],\n      deviceId: this.deviceId\n    };\n  },\n  methods: {\n    click: function click() {\n      myChartji.setOption({\n        toolbox: {\n          show: true,\n          feature: {\n            //敲黑板，重点！！！\n            myTool2: {\n              //自定义按钮 danielinbiti,这里增加，selfbuttons可以随便取名字   以my开头  \n              show: true,\n              //是否显示    \n              title: '设定阀值',\n              //鼠标移动上去显示的文字    \n              icon: 'path://M525.4 721.2H330.9c-9 0-18.5-7.7-18.5-18.1V311c0-9 9.3-18.1 18.5-18.1h336.6c9.3 0 18.5 9.1 18.5 18.1v232.7c0 6 8.8 12.1 15 12.1 6.2 0 15-6 15-12.1V311c0-25.6-25.3-48.9-50.1-48.9h-335c-26.2 0-50.1 23.3-50.1 48.9v389.1c0 36.3 20 51.5 50.1 51.5h197.6c6.2 0 9.3-7.5 9.3-15.1 0-6-6.2-15.3-12.4-15.3zM378.8 580.6c-6.2 0-12.3 8.6-12.3 14.6s6.2 14.6 12.3 14.6h141.4c6.2 0 12.3-5.8 12.3-13.4 0.3-9.5-6.2-15.9-12.3-15.9H378.8z m251.6-91.2c0-6-6.2-14.6-12.3-14.6H375.7c-6.2 0-12.4 8.6-12.4 14.6s6.2 14.6 12.4 14.6h240.8c6.2 0.1 13.9-8.5 13.9-14.6z m-9.2-120.5H378.8c-6.2 0-12.3 8.6-12.3 14.6s6.2 14.6 12.3 14.6h240.8c7.7 0 13.9-8.6 13.9-14.6s-6.2-14.6-12.3-14.6z m119.4 376.6L709 714.1c9.2-12 14.6-27 14.6-43.2 0-39.4-32.1-71.4-71.8-71.4-39.7 0-71.8 32-71.8 71.4s32.1 71.4 71.8 71.4c16.3 0 31.3-5.4 43.4-14.5l31.6 31.5c3.8 3.8 10 3.8 13.8 0 3.8-3.8 3.8-10 0-13.8z m-88.8-23.6c-28.3 0-51.3-22.8-51.3-51s23-51 51.3-51c28.3 0 51.3 22.8 51.3 51s-23 51-51.3 51z',\n              //图标    \n              onclick: function onclick() {\n                //点击事件,这里的option1是chart的option信息    \n                //页面层-自定义\n                layer.open({\n                  title: \"设置阀值\",\n                  type: 1,\n                  area: ['300px'],\n                  content: $(\"#T\"),\n                  btn: ['确认'],\n                  yes: function yes(index, layero) {\n                    layer.close(index); //如果设定了yes回调，需进行手工关闭\n                  }\n                });\n              }\n            }\n          }\n        }\n      });\n    },\n    drawLine: function drawLine() {\n      // 基于准备好的dom，初始化echarts实例\n      myChartfan = this.$echarts.init(document.getElementById('myChart'));\n      myChartfan.setOption({\n        title: {\n          text: '风扇转速',\n          subtext: '',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'axis',\n          axisPointer: {\n            type: 'cross'\n          }\n        },\n        legend: {\n          data: ['风扇1', '风扇2', '风扇3'],\n          bottom: 0\n        },\n        toolbox: {\n          show: true,\n          feature: {\n            mark: {\n              show: true\n            },\n            dataView: {\n              show: true,\n              readOnly: false\n            },\n            magicType: {\n              show: true,\n              type: ['line', 'bar', 'stack', 'tiled']\n            },\n            restore: {\n              show: true\n            },\n            saveAsImage: {\n              show: true\n            }\n          }\n        },\n        calculable: true,\n        xAxis: [{\n          type: 'category',\n          boundaryGap: false,\n          data: []\n        }],\n        yAxis: [{\n          type: 'value',\n          axisLabel: {\n            formatter: function formatter(param) {\n              return param / 1000 + 'k';\n            }\n          }\n        }],\n        series: []\n      });\n    },\n    drawDevice: function drawDevice() {\n      myChartji = this.$echarts.init(document.getElementById('myChart2'));\n      myChartji.setOption({\n        title: {\n          text: '机箱温度',\n          subtext: '',\n          left: 'center'\n        },\n        tooltip: {\n          trigger: 'axis'\n        },\n        legend: {\n          data: ['进风口温度', '出风口温度'],\n          bottom: 0\n        },\n        toolbox: {\n          show: true,\n          feature: {\n            mark: {\n              show: true\n            },\n            dataView: {\n              show: true,\n              readOnly: false\n            },\n            magicType: {\n              show: true,\n              type: ['line', 'bar']\n            },\n            restore: {\n              show: true\n            },\n            saveAsImage: {\n              show: true\n            }\n          }\n        },\n        calculable: true,\n        xAxis: [{\n          type: 'category',\n          boundaryGap: false,\n          data: []\n        }],\n        yAxis: [{\n          type: 'value',\n          axisLabel: {\n            formatter: '{value} °C'\n          },\n          max: 100,\n          min: 0\n        }],\n        series: []\n      });\n    },\n    getRate: function getRate() {\n      var _this = this;\n\n      console.log('deviceId', this.$route.params.menuId);\n      this.legend_names = [];\n      this.series_data = [];\n      this.$axios({\n        method: \"post\",\n        url: 'sys/device/status',\n        data: JSON.stringify({\n          id: this.$route.params.menuId,\n          isSub: true,\n          keys: [\"cht_tem\"]\n        }),\n        headers: {\n          'Content-Type': \"application/json\"\n        },\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          for (var key in res.data.data.status.cht_tem.series) {\n            _this.legend_names.push(key);\n\n            var swpdata = {};\n            swpdata['name'] = key;\n            swpdata['type'] = \"line\";\n            swpdata['data'] = res.data.data.status.cht_tem.series[key];\n\n            _this.series_data.push(swpdata);\n          } // this.legend_names.shift();\n          // this.series_data.shift();\n          // res.data.data.status.cht_tem.times.shift();\n\n\n          myChartji = _this.$echarts.init(document.getElementById('myChart2'));\n          myChartji.setOption({\n            legend: {\n              data: _this.legend_names,\n              bottom: 0\n            },\n            xAxis: {\n              data: res.data.data.status.cht_tem.times\n            },\n            series: _this.series_data\n          });\n        }\n      });\n    },\n    getfan: function getfan() {\n      var _this2 = this;\n\n      this.fan_names = [];\n      this.fan_data = [];\n      this.$axios({\n        method: \"post\",\n        url: 'sys/device/status',\n        data: JSON.stringify({\n          id: this.$route.params.menuId,\n          isSub: true,\n          keys: [\"cht_fan\"]\n        }),\n        headers: {\n          'Content-Type': \"application/json\"\n        },\n        withCredentials: true\n      }).then(function (res) {\n        if (res.data.code == 0) {\n          for (var key in res.data.data.status.cht_fan.series) {\n            _this2.fan_names.push(key);\n\n            var swpdata = {};\n            swpdata['name'] = key;\n            swpdata['type'] = \"line\";\n            swpdata['data'] = res.data.data.status.cht_fan.series[key]; // swpdata['id']=1;\n\n            swpdata['show'] = true;\n            swpdata['smooth'] = true;\n            swpdata['itemStyle'] = {}; // swpdata['itemStyle']['shadowColor']='rgba(0,0,0,0)';\n            // swpdata['itemStyle']['shadowBlur']=5;\n            // swpdata['itemStyle']['shadowOffsetX']=3;\n            // swpdata['itemStyle']['shadowOffsetY']=3;\n\n            swpdata['itemStyle']['normal'] = {};\n            swpdata['itemStyle']['normal']['areaStyle'] = {};\n            swpdata['itemStyle']['normal']['areaStyle']['type'] = \"default\";\n\n            _this2.fan_data.push(swpdata);\n          }\n\n          console.log('fan_data', _this2.fan_data); // this.legend_names.shift();\n          // this.series_data.shift();\n          // res.data.data.status.cht_tem.times.shift();\n\n          myChartfan = _this2.$echarts.init(document.getElementById('myChart'), 'light');\n          myChartfan.setOption({\n            legend: {\n              data: _this2.fan_names,\n              bottom: 0\n            },\n            xAxis: {\n              data: res.data.data.status.cht_fan.times\n            },\n            series: _this2.fan_data\n          });\n        }\n      });\n    },\n    handleClose: function handleClose(done) {\n      this.$confirm('确认关闭？').then(function (_) {\n        done();\n      }).catch(function (_) {});\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.drawDevice();\n    this.drawLine();\n    this.click();\n    var timer = setInterval(function () {\n      _this3.getRate();\n\n      _this3.getfan(); // 某些定时器操作                \n\n    }, 1000); // 通过$once来监听定时器，在beforeDestroy钩子可以被清除。\n\n    this.$once('hook:beforeDestroy', function () {\n      clearInterval(timer);\n    });\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAAA,SAAA;AACA,OAAA,KAAA,MAAA,aAAA;AACA,IAAA,UAAA,GAAA,EAAA;AACA,IAAA,SAAA,GAAA,EAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,OADA;AAEA,MAAA,QAAA,EAAA,EAFA;AAGA,MAAA,KAAA,EAAA,EAHA;AAIA,MAAA,WAAA,EAAA,EAJA;AAKA,MAAA,YAAA,EAAA,EALA;AAMA,MAAA,QAAA,EAAA,EANA;AAOA,MAAA,SAAA,EAAA,EAPA;AAQA,MAAA,QAAA,EAAA,KAAA;AARA,KAAA;AAUA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,KADA,mBACA;AACA,MAAA,SAAA,CAAA,SAAA,CAAA;AACA,QAAA,OAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA;AACA;AACA,YAAA,OAAA,EAAA;AAAA;AACA,cAAA,IAAA,EAAA,IADA;AACA;AACA,cAAA,KAAA,EAAA,MAFA;AAEA;AACA,cAAA,IAAA,EAAA,07BAHA;AAGA;AACA,cAAA,OAAA,EAAA,mBAAA;AAAA;AACA;AACA,gBAAA,KAAA,CAAA,IAAA,CAAA;AACA,kBAAA,KAAA,EAAA,MADA;AAEA,kBAAA,IAAA,EAAA,CAFA;AAGA,kBAAA,IAAA,EAAA,CAAA,OAAA,CAHA;AAIA,kBAAA,OAAA,EAAA,CAAA,CAAA,IAAA,CAJA;AAKA,kBAAA,GAAA,EAAA,CAAA,IAAA,CALA;AAMA,kBAAA,GAAA,EAAA,aAAA,KAAA,EAAA,MAAA,EAAA;AAEA,oBAAA,KAAA,CAAA,KAAA,CAAA,KAAA,EAFA,CAEA;AACA;AATA,iBAAA;AAWA;AAjBA;AAFA;AAFA;AADA,OAAA;AA4BA,KA9BA;AA+BA,IAAA,QA/BA,sBA+BA;AACA;AACA,MAAA,UAAA,GAAA,KAAA,QAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,SAAA,CAAA,CAAA;AACA,MAAA,UAAA,CAAA,SAAA,CAAA;AACA,QAAA,KAAA,EAAA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA,EAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SADA;AAMA,QAAA,OAAA,EAAA;AACA,UAAA,OAAA,EAAA,MADA;AAEA,UAAA,WAAA,EAAA;AACA,YAAA,IAAA,EAAA;AADA;AAFA,SANA;AAYA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA,CAAA,KAAA,EAAA,KAAA,EAAA,KAAA,CADA;AAEA,UAAA,MAAA,EAAA;AAFA,SAZA;AAgBA,QAAA,OAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA;AACA,YAAA,IAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aADA;AAEA,YAAA,QAAA,EAAA;AAAA,cAAA,IAAA,EAAA,IAAA;AAAA,cAAA,QAAA,EAAA;AAAA,aAFA;AAGA,YAAA,SAAA,EAAA;AAAA,cAAA,IAAA,EAAA,IAAA;AAAA,cAAA,IAAA,EAAA,CAAA,MAAA,EAAA,KAAA,EAAA,OAAA,EAAA,OAAA;AAAA,aAHA;AAIA,YAAA,OAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAJA;AAKA,YAAA,WAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA;AALA;AAFA,SAhBA;AA0BA,QAAA,UAAA,EAAA,IA1BA;AA2BA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,UADA;AAEA,UAAA,WAAA,EAAA,KAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SADA,CA3BA;AAmCA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,SAAA,EAAA;AACA,YAAA,SAAA,EAAA,mBAAA,KAAA,EAAA;AACA,qBAAA,KAAA,GAAA,IAAA,GAAA,GAAA;AACA;AAHA;AAFA,SADA,CAnCA;AA6CA,QAAA,MAAA,EAAA;AA7CA,OAAA;AA+CA,KAjFA;AAkFA,IAAA,UAlFA,wBAkFA;AACA,MAAA,SAAA,GAAA,KAAA,QAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,UAAA,CAAA,CAAA;AACA,MAAA,SAAA,CAAA,SAAA,CAAA;AACA,QAAA,KAAA,EAAA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,OAAA,EAAA,EAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SADA;AAMA,QAAA,OAAA,EAAA;AACA,UAAA,OAAA,EAAA;AADA,SANA;AASA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA,CAAA,OAAA,EAAA,OAAA,CADA;AAEA,UAAA,MAAA,EAAA;AAFA,SATA;AAaA,QAAA,OAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,OAAA,EAAA;AACA,YAAA,IAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aADA;AAEA,YAAA,QAAA,EAAA;AAAA,cAAA,IAAA,EAAA,IAAA;AAAA,cAAA,QAAA,EAAA;AAAA,aAFA;AAGA,YAAA,SAAA,EAAA;AAAA,cAAA,IAAA,EAAA,IAAA;AAAA,cAAA,IAAA,EAAA,CAAA,MAAA,EAAA,KAAA;AAAA,aAHA;AAIA,YAAA,OAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA,aAJA;AAKA,YAAA,WAAA,EAAA;AAAA,cAAA,IAAA,EAAA;AAAA;AALA;AAFA,SAbA;AAuBA,QAAA,UAAA,EAAA,IAvBA;AAwBA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,UADA;AAEA,UAAA,WAAA,EAAA,KAFA;AAGA,UAAA,IAAA,EAAA;AAHA,SADA,CAxBA;AA+BA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,SAAA,EAAA;AACA,YAAA,SAAA,EAAA;AADA,WAFA;AAKA,UAAA,GAAA,EAAA,GALA;AAMA,UAAA,GAAA,EAAA;AANA,SADA,CA/BA;AAyCA,QAAA,MAAA,EAAA;AAzCA,OAAA;AA2CA,KA/HA;AAgIA,IAAA,OAhIA,qBAgIA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MAAA;AACA,WAAA,YAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,EAAA;AACA,WAAA,MAAA,CAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,GAAA,EAAA,mBAFA;AAGA,QAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA;AACA,UAAA,EAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MADA;AAEA,UAAA,KAAA,EAAA,IAFA;AAGA,UAAA,IAAA,EAAA,CAAA,SAAA;AAHA,SAAA,CAHA;AAQA,QAAA,OAAA,EAAA;AACA,0BAAA;AADA,SARA;AAWA,QAAA,eAAA,EAAA;AAXA,OAAA,EAYA,IAZA,CAYA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,eAAA,IAAA,GAAA,IAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA,CAAA,MAAA,EAAA;AACA,YAAA,KAAA,CAAA,YAAA,CAAA,IAAA,CAAA,GAAA;;AACA,gBAAA,OAAA,GAAA,EAAA;AACA,YAAA,OAAA,CAAA,MAAA,CAAA,GAAA,GAAA;AACA,YAAA,OAAA,CAAA,MAAA,CAAA,GAAA,MAAA;AACA,YAAA,OAAA,CAAA,MAAA,CAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA,CAAA,MAAA,CAAA,GAAA,CAAA;;AACA,YAAA,KAAA,CAAA,WAAA,CAAA,IAAA,CAAA,OAAA;AACA,WARA,CASA;AACA;AACA;;;AACA,UAAA,SAAA,GAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,UAAA,CAAA,CAAA;AACA,UAAA,SAAA,CAAA,SAAA,CAAA;AACA,YAAA,MAAA,EAAA;AACA,cAAA,IAAA,EAAA,KAAA,CAAA,YADA;AAEA,cAAA,MAAA,EAAA;AAFA,aADA;AAKA,YAAA,KAAA,EAAA;AACA,cAAA,IAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AADA,aALA;AAQA,YAAA,MAAA,EAAA,KAAA,CAAA;AARA,WAAA;AAUA;AACA,OArCA;AAsCA,KA1KA;AA2KA,IAAA,MA3KA,oBA2KA;AAAA;;AACA,WAAA,SAAA,GAAA,EAAA;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,MAAA,CAAA;AACA,QAAA,MAAA,EAAA,MADA;AAEA,QAAA,GAAA,EAAA,mBAFA;AAGA,QAAA,IAAA,EAAA,IAAA,CAAA,SAAA,CAAA;AACA,UAAA,EAAA,EAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MADA;AAEA,UAAA,KAAA,EAAA,IAFA;AAGA,UAAA,IAAA,EAAA,CAAA,SAAA;AAHA,SAAA,CAHA;AAQA,QAAA,OAAA,EAAA;AACA,0BAAA;AADA,SARA;AAWA,QAAA,eAAA,EAAA;AAXA,OAAA,EAYA,IAZA,CAYA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,IAAA,IAAA,CAAA,EAAA;AACA,eAAA,IAAA,GAAA,IAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA,CAAA,MAAA,EAAA;AACA,YAAA,MAAA,CAAA,SAAA,CAAA,IAAA,CAAA,GAAA;;AACA,gBAAA,OAAA,GAAA,EAAA;AACA,YAAA,OAAA,CAAA,MAAA,CAAA,GAAA,GAAA;AACA,YAAA,OAAA,CAAA,MAAA,CAAA,GAAA,MAAA;AACA,YAAA,OAAA,CAAA,MAAA,CAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CALA,CAOA;;AAEA,YAAA,OAAA,CAAA,MAAA,CAAA,GAAA,IAAA;AACA,YAAA,OAAA,CAAA,QAAA,CAAA,GAAA,IAAA;AACA,YAAA,OAAA,CAAA,WAAA,CAAA,GAAA,EAAA,CAXA,CAYA;AACA;AACA;AACA;;AACA,YAAA,OAAA,CAAA,WAAA,CAAA,CAAA,QAAA,IAAA,EAAA;AACA,YAAA,OAAA,CAAA,WAAA,CAAA,CAAA,QAAA,EAAA,WAAA,IAAA,EAAA;AACA,YAAA,OAAA,CAAA,WAAA,CAAA,CAAA,QAAA,EAAA,WAAA,EAAA,MAAA,IAAA,SAAA;;AAEA,YAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,OAAA;AACA;;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,UAAA,EAAA,MAAA,CAAA,QAAA,EAvBA,CAwBA;AACA;AACA;;AACA,UAAA,UAAA,GAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,QAAA,CAAA,cAAA,CAAA,SAAA,CAAA,EAAA,OAAA,CAAA;AACA,UAAA,UAAA,CAAA,SAAA,CAAA;AACA,YAAA,MAAA,EAAA;AACA,cAAA,IAAA,EAAA,MAAA,CAAA,SADA;AAEA,cAAA,MAAA,EAAA;AAFA,aADA;AAKA,YAAA,KAAA,EAAA;AACA,cAAA,IAAA,EAAA,GAAA,CAAA,IAAA,CAAA,IAAA,CAAA,MAAA,CAAA,OAAA,CAAA;AADA,aALA;AAQA,YAAA,MAAA,EAAA,MAAA,CAAA;AARA,WAAA;AAUA;AACA,OApDA;AAqDA,KAnOA;AAoOA,IAAA,WApOA,uBAoOA,IApOA,EAoOA;AACA,WAAA,QAAA,CAAA,OAAA,EACA,IADA,CACA,UAAA,CAAA,EAAA;AACA,QAAA,IAAA;AACA,OAHA,EAIA,KAJA,CAIA,UAAA,CAAA,EAAA,CAAA,CAJA;AAKA;AA1OA,GAbA;AAyPA,EAAA,OAAA,EAAA,mBAAA;AAAA;;AACA,SAAA,UAAA;AACA,SAAA,QAAA;AACA,SAAA,KAAA;AACA,QAAA,KAAA,GAAA,WAAA,CAAA,YAAA;AACA,MAAA,MAAA,CAAA,OAAA;;AACA,MAAA,MAAA,CAAA,MAAA,GAFA,CAGA;;AACA,KAJA,EAIA,IAJA,CAAA,CAJA,CASA;;AACA,SAAA,KAAA,CAAA,oBAAA,EAAA,YAAA;AACA,MAAA,aAAA,CAAA,KAAA,CAAA;AACA,KAFA;AAGA;AAtQA,CAAA","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n  <el-tabs v-model=\"activeName\" type=\"card\" >\r\n    <el-tab-pane label=\"机箱状态\" name=\"first\">\r\n            <el-col :span=\"23\">\r\n                <el-row :gutter=\"16\" class=\"mgb20\">\r\n                    <el-col :span=\"24\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\" style=\"height:450px;width:100%;\">\r\n                        <div slot=\"header\" class=\"clearfix\">\r\n                            <span>风扇转速</span>\r\n                       </div>    \r\n                            <div id=\"myChart\" :style=\"{width: '100%', height: '350px'}\"></div>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n                <el-row :gutter=\"20\" class=\"mgb20\">\r\n                    <el-col :span=\"24\">\r\n                        <el-card shadow=\"hover\" :body-style=\"{padding: '0px'}\" style=\"height:450px;width:100%;\">\r\n                        <div slot=\"header\" class=\"clearfix\">\r\n                            <span>机箱温度</span>\r\n                       </div>    \r\n                            <div id=\"myChart2\" :style=\"{width: '100%', height: '350px'}\"></div>\r\n                        </el-card>\r\n                    </el-col>\r\n                </el-row>\r\n            </el-col>  \r\n    </el-tab-pane>\r\n  </el-tabs>\r\n\r\n        <div  id=\"T\" style=\"width:90%;margin:10px;\" hidden>\r\n            <div> 保护温度: <el-input v-model=\"protectT\" style=\"width:150px;\"></el-input></div>\r\n                <br/>\r\n            <div> 报警温度: <el-input v-model=\"warnT\" style=\"width:150px;\"></el-input></div>\r\n        </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { fetchData } from '../../api/index';\r\nimport layer from \"layui-layer\";\r\nlet myChartfan='';\r\nlet myChartji='';\r\nexport default {\r\n    data(){\r\n        return{\r\n            activeName:'first',\r\n            protectT:'',\r\n            warnT:'',\r\n            series_data:[],\r\n            legend_names:[],\r\n            fan_data:[],\r\n            fan_names:[],\r\n            deviceId:this.deviceId\r\n        }\r\n    },\r\n    methods:{\r\n        click(){\r\n            myChartji.setOption({\r\n                   toolbox: {\r\n                    show : true,\r\n                    feature : {\r\n                        //敲黑板，重点！！！\r\n                        myTool2:{//自定义按钮 danielinbiti,这里增加，selfbuttons可以随便取名字   以my开头  \r\n                            show:true,//是否显示    \r\n                            title:'设定阀值', //鼠标移动上去显示的文字    \r\n                            icon:'path://M525.4 721.2H330.9c-9 0-18.5-7.7-18.5-18.1V311c0-9 9.3-18.1 18.5-18.1h336.6c9.3 0 18.5 9.1 18.5 18.1v232.7c0 6 8.8 12.1 15 12.1 6.2 0 15-6 15-12.1V311c0-25.6-25.3-48.9-50.1-48.9h-335c-26.2 0-50.1 23.3-50.1 48.9v389.1c0 36.3 20 51.5 50.1 51.5h197.6c6.2 0 9.3-7.5 9.3-15.1 0-6-6.2-15.3-12.4-15.3zM378.8 580.6c-6.2 0-12.3 8.6-12.3 14.6s6.2 14.6 12.3 14.6h141.4c6.2 0 12.3-5.8 12.3-13.4 0.3-9.5-6.2-15.9-12.3-15.9H378.8z m251.6-91.2c0-6-6.2-14.6-12.3-14.6H375.7c-6.2 0-12.4 8.6-12.4 14.6s6.2 14.6 12.4 14.6h240.8c6.2 0.1 13.9-8.5 13.9-14.6z m-9.2-120.5H378.8c-6.2 0-12.3 8.6-12.3 14.6s6.2 14.6 12.3 14.6h240.8c7.7 0 13.9-8.6 13.9-14.6s-6.2-14.6-12.3-14.6z m119.4 376.6L709 714.1c9.2-12 14.6-27 14.6-43.2 0-39.4-32.1-71.4-71.8-71.4-39.7 0-71.8 32-71.8 71.4s32.1 71.4 71.8 71.4c16.3 0 31.3-5.4 43.4-14.5l31.6 31.5c3.8 3.8 10 3.8 13.8 0 3.8-3.8 3.8-10 0-13.8z m-88.8-23.6c-28.3 0-51.3-22.8-51.3-51s23-51 51.3-51c28.3 0 51.3 22.8 51.3 51s-23 51-51.3 51z', //图标    \r\n                            onclick:function() {//点击事件,这里的option1是chart的option信息    \r\n                                //页面层-自定义\r\n                                layer.open({\r\n                                    title: \"设置阀值\",\r\n                                    type:1,\r\n                                    area: ['300px'],\r\n                                    content: $(\"#T\"),\r\n                                    btn: ['确认'],\r\n                                    yes: function (index,layero) {\r\n                                        \r\n                                        layer.close(index); //如果设定了yes回调，需进行手工关闭\r\n                                    }\r\n                                });\r\n                            }    \r\n                        }\r\n                    }\r\n                },\r\n            });\r\n              \r\n        },\r\n        drawLine(){\r\n            // 基于准备好的dom，初始化echarts实例\r\n            myChartfan = this.$echarts.init(document.getElementById('myChart'));\r\n            myChartfan.setOption({\r\n                title : {\r\n                    text: '风扇转速',\r\n                    subtext: '',\r\n                    left: 'center'\r\n                },\r\n                tooltip : {\r\n                    trigger: 'axis',\r\n                    axisPointer: {\r\n                    type: 'cross'\r\n                }\r\n                },\r\n                legend: {\r\n                    data:['风扇1','风扇2','风扇3'],\r\n                    bottom: 0\r\n                },\r\n                toolbox: {\r\n                    show : true,\r\n                    feature : {\r\n                        mark : {show: true},\r\n                        dataView : {show: true, readOnly: false},\r\n                        magicType : {show: true, type: ['line', 'bar', 'stack', 'tiled']},\r\n                        restore : {show: true},\r\n                        saveAsImage : {show: true}\r\n                    }\r\n                },\r\n                calculable : true,\r\n                xAxis : [\r\n                    {\r\n                        type : 'category',\r\n                        boundaryGap : false,\r\n                        data : []\r\n                        \r\n                    }\r\n                ],\r\n                yAxis : [\r\n                    {\r\n                        type : 'value',\r\n                        axisLabel : {\r\n                            formatter: function(param){\r\n                                return param/1000+'k';\r\n                            }\r\n                        }\r\n                    }\r\n                ],\r\n                series : []\r\n            });\r\n        },\r\n        drawDevice(){\r\n            myChartji = this.$echarts.init(document.getElementById('myChart2'))\r\n            myChartji.setOption({\r\n                title : {\r\n                    text: '机箱温度',\r\n                    subtext: '',\r\n                    left: 'center'\r\n                },\r\n                tooltip : {\r\n                    trigger: 'axis'\r\n                },\r\n                legend: {\r\n                    data:['进风口温度','出风口温度'],\r\n                    bottom:0\r\n                },\r\n                toolbox: {\r\n                    show : true,\r\n                    feature : {\r\n                        mark : {show: true},\r\n                        dataView : {show: true, readOnly: false},\r\n                        magicType : {show: true, type: ['line', 'bar']},\r\n                        restore : {show: true},\r\n                        saveAsImage : {show: true},\r\n                    }\r\n                },\r\n                calculable : true,\r\n                xAxis : [\r\n                    {\r\n                        type : 'category',\r\n                        boundaryGap : false,\r\n                        data : []\r\n                    }\r\n                ],\r\n                yAxis : [\r\n                    {\r\n                        type : 'value',\r\n                        axisLabel : {\r\n                            formatter: '{value} °C'\r\n                        },\r\n                        max:100,\r\n                        min:0\r\n                    }\r\n                ],\r\n                series : []\r\n            }); \r\n        } ,\r\n        getRate(){\r\n            console.log('deviceId',this.$route.params.menuId);\r\n        this.legend_names=[];\r\n        this.series_data=[];\r\n         this.$axios({\r\n                method:\"post\",\r\n                url:'sys/device/status',\r\n                data:JSON.stringify({\r\n                    id:this.$route.params.menuId,\r\n                    isSub: true,\r\n                    keys: [\"cht_tem\"]\r\n                }),\r\n                headers: {\r\n                        'Content-Type': \"application/json\"\r\n                   },\r\n                withCredentials:true,\r\n            }).then(res => {                   \r\n                if(res.data.code==0){   \r\n                    for(var key in res.data.data.status.cht_tem.series){\r\n                        this.legend_names.push(key);\r\n                        var swpdata={};\r\n                        swpdata['name']=key;\r\n                        swpdata['type']=\"line\";\r\n                        swpdata['data']=res.data.data.status.cht_tem.series[key];\r\n                        this.series_data.push(swpdata); \r\n                    }\r\n                    // this.legend_names.shift();\r\n                    // this.series_data.shift();\r\n                    // res.data.data.status.cht_tem.times.shift();\r\n                    myChartji = this.$echarts.init(document.getElementById('myChart2'));\r\n                        myChartji.setOption({\r\n                            legend: {\r\n                                data:this.legend_names,\r\n                                bottom: 0\r\n                            },\r\n                            xAxis: {\r\n                                data: res.data.data.status.cht_tem.times\r\n                            },\r\n                            series:this.series_data\r\n                        });\r\n                 }\r\n             })\r\n            },\r\n        getfan(){\r\n        this.fan_names=[];\r\n        this.fan_data=[];\r\n         this.$axios({\r\n                method:\"post\",\r\n                url:'sys/device/status',\r\n                data:JSON.stringify({\r\n                    id:this.$route.params.menuId,\r\n                    isSub: true,\r\n                    keys: [\"cht_fan\"]\r\n                }),\r\n                headers: {\r\n                        'Content-Type': \"application/json\"\r\n                   },\r\n                withCredentials:true,\r\n            }).then(res => {                 \r\n                if(res.data.code==0){   \r\n                    for(var key in res.data.data.status.cht_fan.series){\r\n                        this.fan_names.push(key);\r\n                        var swpdata={};\r\n                        swpdata['name']=key;\r\n                        swpdata['type']=\"line\";\r\n                        swpdata['data']=res.data.data.status.cht_fan.series[key];\r\n                        \r\n                        // swpdata['id']=1;\r\n\r\n                        swpdata['show']=true;\r\n                        swpdata['smooth']=true;\r\n                        swpdata['itemStyle']={};\r\n                        // swpdata['itemStyle']['shadowColor']='rgba(0,0,0,0)';\r\n                        // swpdata['itemStyle']['shadowBlur']=5;\r\n                        // swpdata['itemStyle']['shadowOffsetX']=3;\r\n                        // swpdata['itemStyle']['shadowOffsetY']=3;\r\n                        swpdata['itemStyle']['normal']={};\r\n                        swpdata['itemStyle']['normal']['areaStyle']={};\r\n                        swpdata['itemStyle']['normal']['areaStyle']['type']=\"default\";\r\n\r\n                        this.fan_data.push(swpdata); \r\n                    }\r\n                    console.log('fan_data',this.fan_data);\r\n                    // this.legend_names.shift();\r\n                    // this.series_data.shift();\r\n                    // res.data.data.status.cht_tem.times.shift();\r\n                    myChartfan = this.$echarts.init(document.getElementById('myChart'),'light');\r\n                        myChartfan.setOption({\r\n                            legend: {\r\n                                data:this.fan_names,\r\n                                bottom: 0\r\n                            },\r\n                            xAxis: {\r\n                                data: res.data.data.status.cht_fan.times\r\n                            },\r\n                            series:this.fan_data\r\n                        });\r\n                 }\r\n             })\r\n            },\r\n        handleClose(done) {\r\n            this.$confirm('确认关闭？')\r\n            .then(_ => {\r\n                done();\r\n            })\r\n            .catch(_ => {});\r\n        }   \r\n      },\r\n    mounted:function(){\r\n        this.drawDevice();\r\n        this.drawLine();\r\n        this.click();\r\n        const timer = setInterval(() =>{                    \r\n            this.getRate();\r\n            this.getfan();\r\n                // 某些定时器操作                \r\n        }, 1000);            \r\n        // 通过$once来监听定时器，在beforeDestroy钩子可以被清除。\r\n        this.$once('hook:beforeDestroy', () => {            \r\n            clearInterval(timer);                                    \r\n        })\r\n    }\r\n}\r\n</script>\r\n<style>\r\n</style>"],"sourceRoot":"src/components/DeviceStatus"}]}